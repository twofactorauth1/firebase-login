<!--
* COPYRIGHT INDIGENOUS SOFTWARE, INC., LLC 2014
*
* All use or reproduction of any or all of this content must be approved.
* Please contact info@indigenous.io for approval or questions.
-->

<!--
CONTACTS MAIN VIEW
-->
<script type="text/x-handlebars-template" name="contacts-main">
    <div class="pageheader row">
        <h2 class="col-xs-8"><i class="fa fa-users"></i> Customers </h2>

        <div class="col-xs-4">
            <div class="btn btn-success pull-right btn-create-contact" type="button">
                <i class="fa fa-plus"/>
                <span class="hidden-xs">Add</span>
            </div>

            <div class="btn-group pull-right" style="margin-right:8px;">
                <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
                    Import <span class="caret"/>
                </button>

                <ul class="dropdown-menu" role="menu">
                    <li class="btn-import-facebook"><a href="#">Import Facebook friends</a></li>
                    <li class="btn-import-gmail"><a href="#">Import Gmail contacts</a></li>
                    <li class="btn-import-linkedin"><a href="#">Import LinkedIn connections</a></li>
                </ul>
            </div>

        </div>
    </div>

    <div class="alert alert-info fade in">
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">Ã—</button>
        <h4 class="center">Hi Robin, Welcome to Customers!</h4>
        <p class="center">Okay, it&#39;s time to start managing your products. If you need assitance use any of the three ways below.</p>
        <hr class="mb30"></hr>
        <div class="col-sm-6">
            <h4><i class="fa fa-youtube-play"></i> Watch this 30 second video about managing customers.</h4>
            <img class="onboard-vid" src="/assets/images/video-holder.jpg">
        </div>
        <div class="mb30"></div>
         <div class="col-sm-6">
            <h4><i class="fa fa-compass"></i> Schedule a Demo</h4>
            <p>Schedule a personal demo with one of our customer support representatives who can show you via screen share how to manage your contacts.</p>
            <button class="btn btn-primary btn-lg">Schedule Now <i class="fa fa-caret-right"></i></button>
            <hr class="mb30"></hr>
            <h4><i class="fa fa-file-text-o"></i> Read the Documentation</h4>
            <p>If you prefer a list of steps to read, then head over to our detailed documentation about all the aspects of managing your contacts.</p>
            <button class="btn btn-primary btn-lg">View Docs <i class="fa fa-caret-right"></i></button>
        </div>
        <div class="clearfix mb30"></div>
    </div>

    <div class="contentpanel">
        <div class="panel panel-default row">
            <div class="panel-body">
                <div class="col-sm-6">
                    <input type="text" placeholder="Search Customers" class="form-control mb15 input-lg">
                </div>
                <div class="col-sm-6 form-horizontal">
                    <div class="form-group row">
                        <select class=" form-control chosen-select input-lg">
                            <option value="">Filter Customers</option>
                            <option value="near_store">Important</option>
                            <option value="near_store">People</option>
                            <option value="near_store">Companies</option>
                            <option value="near_store">Recently Viewed</option>
                            <option value="near_store">Recently Added</option>
                            <option value="near_store">Recently Contacted</option>
                            <option value="last_acitve">Last Active</option>
                            <option value="visits"># of Visits</option>
                            <option value="purchases">Purchased</option>
                            <option value="starred">Important</option>
                            <option value="near_store">Proximity to You</option>
                        </select>
                    </div>
                </div>
            </div>

            {{> contact-paginator}}
        </div>
        <!-- panel -->

        <div class="people-list">
            <div class="row">
                {{#each contacts}}
                <div class="col-xs-12 col-sm-4">
                    <div class="people-item btn-view-contact-details contact-item" data-contactid="{{_id}}">
                        <span class="important-star tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Important Contact">
                            <i class="fa {{#if starred}}fa-star{{else}}fa-star-o{{/if}}"/>
                        </span>

                        <div class="media">
                            <div class="col-xs-12f">
                                // {{#if photoSquare}}
                                //     {{#isGoogleImage photoSquare}}
                                //         <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader" data-img-src="{{photoSquare}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                //     {{else}}
                                //         <img class="img-circle media-object thumbnail" src="{{photoSquare}}">
                                //     {{/isGoogleImage}}
                                // {{else}}
                                //     {{#isGoogleImage photo}}
                                //         <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader" data-img-src="{{photo}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                //     {{else}}
                                //         <img class="img-circle media-object thumbnail standard" src="{{#if photo}}{{photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
                                //     {{/isGoogleImage}}
                                // {{/if}}

                                <span class="name visible-xs">
                                    <h4>
                                        {{first}} {{middle}} {{last}}
                                        <span class="label label-info contact-cat pull-right hidden-xs">{{contactTypeLabel this}}</span>
                                    </h4>
                                </span>

                                <div class="clear"></div>
                                <ul class="social-list hidden-xs">
                                    <li>
                                        {{#getBestEmail this}}
                                        <a href="mailto:{{$email}}" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Email" target="_blank"><i class="fa fa-envelope-o"></i></a>
                                        {{else}}
                                        <a href="#" class="tooltips disabled" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Email Address"><i class="fa fa-envelope-o"></i></a>
                                        {{/getBestEmail}}
                                    </li>


                                    <li>
                                        {{#getFacebookId this}}
                                        <a href="https://www.facebook.com/{{$facebookId}}" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a>
                                        {{else}}
                                        <a href="#" class="tooltips disabled" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Facebook Link"><i class="fa fa-facebook"></i></a>
                                        {{/getFacebookId}}
                                    </li>

                                    <li>
                                        {{#getTwitterId this}}
                                        <a href="https://twitter.com/intent/user?user_id={{$twitterId}}" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Twitter"><i class="fa fa-twitter"></i></a>
                                        {{else}}
                                        <a href="#" class="tooltips disabled" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Twitter Account"><i class="fa fa-twitter"></i></a>
                                        {{/getTwitterId}}
                                    </li>

                                    <li>
                                        {{#getLinkedInId this}}
                                        <a href="{{#if $linkedInUrl}}{{$linkedInUrl}}{{else}}http://www.linkedin.com/profile/view?id={{$linkedInId}}{{/if}}" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a>
                                        {{else}}
                                        <a href="#" class="tooltips disabled" data-toggle="tooltip" data-placement="top" title="" data-original-title="No LinkedIn Account" target="_blank"><i class="fa fa-linkedin"></i></a>
                                        {{/getLinkedInId}}
                                    </li>

                                    {{#getAddress this}}
                                    <li>
                                        <a href="https://www.google.com/maps?q={{$this.address}}" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Location" target="_blank"><i class="fa fa-map-marker"></i></a>
                                    </li>
                                    {{/getAddress}}

                                </ul>
                            </div>
                            <div class="media-body col-xs-12 hidden-xs">
                                <h4 class="person-name">{{first}} {{middle}} {{last}}</h4>
                                <span class="label label-info contact-cat">{{contactTypeLabel this}}</span>

                                <div class="hidden-xs">
                                    <div class="last-active text-muted">Last Active:
                                        {{#if lastActive}}
                                            {{lastActive}} days ago
                                        {{else}}
                                            n/a
                                        {{/if}}
                                    </div>

                                    <div class="purchased text-muted">
                                        {{#if purchased}}
                                            Purchased: Yes
                                        {{else}}
                                            Purchased: n/a
                                        {{/if}}
                                    </div>

                                    <div class="emails-opened text-muted">
                                        {{#if totalEmails}}
                                            Emails Opened:
                                            {{#if emailsOpened}}
                                                {{emailsOpened}}/{{totalEmails}}
                                            {{else}}
                                                0/{{totalEmails}}
                                            {{/if}}
                                        {{else}}
                                            Emails Opened: n/a
                                        {{/if}}
                                    </div>

                                    <div class="calls-made text-muted">
                                        Calls Made:
                                        {{#if callsMade}}
                                            {{callsMade}}
                                        {{else}}
                                            n/a
                                        {{/if}}
                                    </div>

                                    <div class="customer-since text-muted">
                                        Customer since:
                                        {{#if firstPurchase}}
                                            {{formatDate fistPurchase}}
                                        {{else}}
                                            n/a
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                            <div class="pull-right">
                                <span class="visible-inline-xs">
                                type: {{contactTypeLabel this}} |
                                </span>

                                <span class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Sources where this contact information came from">sources: </span>
                                {{#each details}}
                                    <span><i class="{{iconFromSocialType type}}"/></span>
                                {{/each}}


                            </div>
                            <div class="clear clearfix"/>
                        </div>
                    </div>
                </div>
                {{else}}
                <div class="visible-xs col-xs-10">
                    <h3>No Contacts Available</h3>
                </div>

                <div class="visible-xs btn btn-success col-xs-12">Add a new contact</div>
                {{/each}}

                {{#iterateDifference min count 0}}
                <div class="col-xs-12 col-sm-4">
                    <div class="people-item btn-view-contact-details" data-contactid="{{_id}}">
                        <div class="media">
                            <span class="important-star"><i class="fa fa-star-o"></i>
                            </span>
                            <div class="media">
                                <div class="col-xs-12">
                                    {{#if photoSquare}}
                                        {{#isGoogleImage photoSquare}}
                                            <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader" data-img-src="{{photoSquare}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                        {{else}}
                                            <img class="img-circle media-object thumbnail" src="{{photoSquare}}">
                                        {{/isGoogleImage}}
                                    {{else}}
                                        {{#isGoogleImage photo}}
                                            <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader" data-img-src="{{photo}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                        {{else}}
                                            <img class="img-circle media-object thumbnail standard" src="{{#if photo}}{{photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
                                        {{/isGoogleImage}}
                                    {{/if}}
                                    <div class="clear"></div>
                                </div>
                                <div class="media-body col-xs-12">
                                    <h4 class="person-name center">Henry Holmes
                                        <span class="leaf-scale" data-container="body" data-toggle="popover" data-placement="top" data-title="Leaf Score 3/5" data-content="<ul><li class='strike'>Visited Website</li><li class='strike'>Signed up for Newsletter</li><li class='strike'>Viewed Tour</li><li>Purchased > $100</li><li>Refered Friend</li></ul>">
                                            <i class="fa fa-leaf"></i>
                                            <i class="fa fa-leaf"></i>
                                            <i class="fa fa-leaf"></i>
                                            <i class="fa fa-leaf text-muted"></i>
                                            <i class="fa fa-leaf text-muted"></i>
                                        </span>
                                    </h4>
                                    <div class="center">
                                        <span class="label label-info contact-cat">Customer</span>
                                        <span class="label label-info contact-cat">Lead</span>
                                    </div>
                                    <hr class="clearfix mb15"></hr>
                                    <div class="customer-stats">
                                    <div class="last-active"><i class="fa fa-bolt"></i> Last Active:
                                        <span class="data">2 days ago</span>
                                    </div>
                                    <div class="purchased"><i class="fa fa-money"></i> Purchased:
                                        <span class="data">Yes</span>
                                    </div>
                                    <div class="emails-opened"><i class="fa fa-envelope"></i> Emails Opened:
                                        <span class="data">3/5</span>
                                    </div>
                                    <div class="calls-made"><i class="fa fa-phone"></i> Calls Made:
                                        <span class="data">5</span>
                                    </div>
                                    <div class="customer-since"><i class="fa fa-calendar"></i> Customer Since:
                                        <span class="data">Jan 2013</span>
                                    </div>
                                    </div>
                                </div>
                                <div class="clearfix mb15"></div>
                                <hr></hr>
                                <ul class="social-list">
                                    <li><a href="https://www.google.com/maps/place/700+E+Ocean+Blvd/@33.765741,-118.184199,17z/" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="700 E. Ocean Blvd" target="_blank"><i class="fa fa-map-marker"></i></a>
                                    </li>
                                    <li><a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="619-000-0000" target="_blank"><i class="fa fa-phone"></i></a>
                                    </li>
                                    <li><a href="mailto:ronburgandy@gmail.com" class="tooltips" data-toggle="tooltip" data-placement="top" title="ronburgandy@gmail.com" data-original-title="Email" target="_blank"><i class="fa fa-envelope-o"></i></a>
                                    </li>
                                    <li><a href="https://www.facebook.com/theronburgandy" class="tooltips" data-toggle="tooltip" data-placement="top" title="theronburgandy" data-original-title="theronburgandy" target="_blank"><i class="fa fa-facebook"></i></a>
                                    </li>
                                    <li><a href="https://twitter.com/RobinBurgundy" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="RobinBurgundy"><i class="fa fa-twitter"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                {{/iterateDifference}}
            </div>
        </div>
    </div>
    <!--
    <div id="contacts-main-container">


        <div class="row">
            <ul class="pull-right hidden-md hidden-lg unstyled col-sm-1" style="margin-top:15px;">
                {{#eachLetter}}
                <li><a class="btn-letter" href="#">{{letter}}</a></li>
                {{/eachLetter}}
            </ul>

            <div id="contacts-list-container" class="col-sm-11 col-md-12">
                {{#each contacts}}
                <div class="col-xs-11 col-sm-6 col-md-4 contact-thumbnail">
                    <div class="inner btn-view-contact-details" data-contactid="{{_id}}">
                        <strong>{{first}} {{middle}} {{last}}</strong> <span class="visible-inline-xs"><small>
                        {{contactTypeLabel this}}
                    </small></span>

                        <div class="hidden-xs">
                            <small>{{contactTypeLabel this}}</small>
                        </div>

                        <div class="contacts-photo-container">
                            {{#if photoSquare}}
                                {{#isGoogleImage photoSquare}}
                                    <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader thumb-lg" data-img-src="{{photoSquare}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                {{else}}
                                    <img class="img-circle media-object thumbnail" src="{{photoSquare}}">
                                {{/isGoogleImage}}
                            {{else}}
                                {{#isGoogleImage photo}}
                                    <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader thumb-lg" data-img-src="{{photo}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                                {{else}}
                                    <img class="img-circle media-object thumbnail standard thumb-lg" src="{{#if photo}}{{photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
                                {{/isGoogleImage}}
                            {{/if}}
                        </div>

                        <div class="hidden-xs contact-thumbnail-details">
                            <div>Last Active:</div>
                            <div>Purchased:</div>
                            <div>Emails Opened:</div>
                            <div>Calls Made:</div>
                        </div>

                        <div class="contact-thumbnail-actions hidden-xs">
                            <div class="fa fa-envelope-o" title="send-message"/>
                        </div>
                    </div>
                </div>
                {{else}}

                <div class="visible-xs col-xs-10">
                    <h3>No Records Available</h3>
                </div>

                <div class="visible-xs btn btn-primary col-xs-8">Add a new contact</div>
                {{/each}}

                {{#iterateDifference min count 0}}
                <div class="col-xs-11 col-sm-6 col-md-4 contact-thumbnail hidden-xs {{#if $last}}hidden-md hidden-lg{{/if}}">
                    <div class="inner">
                        <strong>Create new Contact</strong>

                        <div class="contacts-photo-container">
                            <img class="img-circle" src="/assets/icons/blank-user.jpg">
                        </div>

                        <div class="hidden-xs">
                            <div class="btn btn-success btn-create-contact">Add Contact</div>
                        </div>

                    </div>
                </div>
                {{/iterateDifference}}
            </div>
        </div>


        {{> contact-paginator}}
    </div>
    -->
</script>

<script type="text/x-handlebars-template" name="contact-sidebar">
  <div class="rightpanel rightpanel-website">
       <ul class="nav nav-tabs nav-justified">
        <li class="active"><a href="#rp-settings" data-toggle="tab">Settings</a>
        </li>
        <li><a href="#" data-toggle="tab"></a>
        </li>
    </ul>

    <!-- Tab panes -->

    <div class="tab-content">
        <div class="tab-pane pane-settings active" id="rp-settings">

            <div class="form-group">
                <button class="btn btn-warning btn-block import-contacts" data-toggle="modal" data-target="#importContactsModal"><i class="fa fa-cloud-upload"></i> Import Contacts</button>
            </div>

            <div class="form-group">
                <a href="#" class="btn btn-success btn-block"><i class="fa fa-cloud-download"></i> Export Contacts</a>
            </div>

            <div class="form-group">
                <a href="#" class="btn btn-primary btn-block"><i class="fa fa-files-o"></i> Fix Duplicates</a>
            </div>

            <h5 class="sidebartitle mb20">Display Settings</h5>
            <div class="form-group row">
                <label class="col-xs-12 control-label">Contacts List Display</label>
                <div class="col-xs-12">
                    <select class=" form-control chosen-select" data-placeholder="Sort Contacts">
                        <option value=""></option>
                        <option value="United States">First Last</option>
                        <option value="United Kingdom">Last, First</option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-12 control-label">Contacts List Ordering</label>
                <div class="col-xs-12">
                    <select class=" form-control chosen-select" data-placeholder="Sort Contacts">
                        <option value=""></option>
                        <option value="United States">First Last</option>
                        <option value="United Kingdom">Last, First</option>
                        <option value="United Kingdom">Date Added</option>
                        <option value="United Kingdom">Last Activity</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-xs-12 control-label">Show / Hide Attributes</label>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="contact-cat" checked="checked">
                    <label for="contact-cat">Category</label>
                </div>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="last-active" checked="checked">
                    <label for="last-active">Last Active</label>
                </div>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="purchased" checked="checked">
                    <label for="purchased">Purchased</label>
                </div>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="emails-opened" checked="checked">
                    <label for="emails-opened">Emails Opened</label>
                </div>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="calls-made" checked="checked">
                    <label for="calls-made">Calls Made</label>
                </div>
                <div class="col-xs-12 ckbox ckbox-success">
                    <input type="checkbox" id="customer-since" checked="checked">
                    <label for="customer-since">Customer Since</label>
                </div>
            </div>

        </div>
        <!-- tab-pane -->


    </div>
    <!-- tab-content -->
    </div>
</script>


<script type="text/x-handlebars-template" name="contact-paginator" partial="true">
    <div style="width:100%; text-align:center">
        <ul class="pagination hidden-xs letter-list">
            {{#eachLetter}}
            <li class="{{#equals currentLetter letter}}active{{/equals}}"><a class="btn-letter" href="#">{{letter}}</a></li>
            {{/eachLetter}}
        </ul>
    </div>
</script>
<!-- END CONTACTS MAIN -->


<!--
CONTACT DETAILS VIEW
-->
<script type="text/x-handlebars-template" name="contact-details-main">
    <div class="pageheader row">
        <div class="col-xs-8">
            <button id="btn-back-to-contacts" class="btn btn-success pull-left" type="button">
                <span class="fa fa-chevron-left"></span>
                <span class="hidden-xs">Back</span>
            </button>
            <h2> {{contact.first}} {{contact.middle}} {{contact.last}} </h2>
        </div>

        <div class="col-xs-4">
            <div class="btn btn-success pull-right btn-edit-contact" type="button">
                <i class="fa fa-edit"/>
                <span class="hidden-xs">Edit</span>
            </div>
        </div>
    </div>

    <div class="map-wrap">
        <div id="map-marker" style="height: 150px; width:100%"></div>
        <div class="panel panel-default widget-weather col-sm-4 col-sm-offset-7 hidden-xs">
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-6 temp text-center">
                        <h2>7:30pm</h>
                            <h5><i class="fa fa-map-marker"></i> &nbsp; San Diego, CA</h5>
                    </div>
                    <div class="col-xs-6 weather text-center">
                        <i class="fa fa-cloud weather-icon"></i>
                        <div class="pull-left">96 &deg; F</div>
                        <div class="pull-right"><i class="fa fa-flag"></i> 30mph</div>
                    </div>
                </div>
            </div>
            <!-- panel-body -->
        </div>
    </div>
    <div class="visible-xs">
        <div class="btn-group col-xs-12">
          <button type="button" class="btn btn-info col-xs-6 profile-btn active">Profile</button>
          <button type="button" class="btn btn-info col-xs-6 activity-btn">Activity</button>
        </div>
    </div>

    <div id="contact-details-container" class="contentpanel">
        <div class="row">
            <div class="col-md-6">
                {{> contact-details}}
            </div>

            <div class="col-md-6 activity-section">
                <h3 class="profile-name col-xs-6">Activity with {{contact.first}}</h3>
                <div class="col-xs-6">
                    <select class="pull-right form-control chosen-select activity-select" data-placeholder="Activity Type">
                        <option value=""></option>
                        <option value="email">Email</option>
                        <option value="phone">Phone</option>
                        <option value="appointment">Appointment</option>
                        <option value="form-entry">Form Entry</option>
                        <option value="visits">Visits</option>
                        <option value="twitter">Twitter</option>
                        <option value="reviews">Reviews</option>
                    </select>
                </div>
                <hr class="clearfix mb30"></hr>
                <div class="smart-timeline">
                    <ul class="smart-timeline-list">
                    </ul>
                </div>
            </div>
        </div>

    </div>
</script>


<script type="text/x-handlebars-template" name="contact-details" partial="true">
    <div class="old-contact hidden">
        <div id="contact-type">
            <small>{{contactTypeLabel contact}}</small>
        </div>

        <div class="contact-photo-container">
            <img class="img-rounded" src="{{#if contact.photo}}{{contact.photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
        </div>

        <div id="contact-summary">
            <div>Last Active:</div>
            <div>Purchased:</div>
            <div>Emails Opened:</div>
            <div>Calls Made:</div>
        </div>

        <div id="contact-information">
            <h4>Contact Information</h4>
            <hr/>

            <div id="phone-row" class="row">
                <div class="col-xs-1"><i class="icon-main fa fa-phone"/></div>
                <div class="col-xs-10">
                    {{#each contact.details}}
                    {{#each phones}}
                    <div>
                        <a href="tel:{{number}}">{{number}}</a>
                        <small>{{phoneTypeLabel type}}</small>
                        <i class="icon-social {{iconFromSocialType ../type}}"/>
                    </div>
                    {{/each}}
                    {{/each}}
                </div>
            </div>

            <div id="address-row" class="row">
                <div class="col-xs-1"><i class="icon-main fa fa-map-marker"/></div>
                <div class="col-xs-10">
                    {{#each contact.details}}
                    {{#each addresses}}
                    <div class="edit-address-container" data-id="{{_id}}">
                        {{#if address}}
                        <div><strong>{{address}}</strong></div>
                        {{/if}}
                        {{#if address2}}
                        <div>{{address2}}</div>
                        {{/if}}
                        <div>
                            {{city}}
                            {{#if state}}, {{state}}{{/if}}
                            {{#if zip}}, {{zip}}{{/if}}
                            {{#if country}}, {{country}}{{/if}} <i class="icon-social {{iconFromSocialType ../type}}"/>
                        </div>

                        <div>
                            {{#if defaultShipping}}
                            <small>Shipping <i class="fa fa-check"/></small>
                            {{/if}}
                            {{#if defaultBilling}}
                            <small>Billing <i class="fa fa-check"/></small>
                            {{/if}}
                        </div>
                    </div>
                    {{/each}}
                    {{/each}}
                </div>
            </div>

            <div id="email-row" class="row">
                <div class="col-xs-1"><i class="icon-main fa fa-envelope"/></div>
                <div class="col-xs-10">
                    {{#each contact.details}}
                        {{#each emails}}
                            {{#if this}}
                                <a href="mailto:{{this}}">{{this}}</a> <i class="icon-social {{iconFromSocialType ../../type}}"/>
                            {{/if}}
                        {{/each}}
                    {{/each}}
                </div>
            </div>

            <div id="btn-edit-contact-mobile" class="btn-edit-contact visible-xs col-12-xs btn btn-primary">Edit Contact
            </div>
        </div>
    </div>

    <div class="clearfix"></div>

    <div class="profile">
                <div class="col-xs-12">
                    {{#if photoSquare}}
                        {{#isGoogleImage photoSquare}}
                            <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader thumb-lg" data-img-src="{{photoSquare}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                        {{else}}
                            <img class="img-circle media-object thumbnail" src="{{photoSquare}}">
                        {{/isGoogleImage}}
                    {{else}}
                        {{#isGoogleImage photo}}
                            <img src="/assets/icons/blank-user.jpg" class="img-circle media-object thumbnail batched-image-loader thumb-lg" data-img-src="{{photo}}" data-img-loaded="false" onerror="this.src='/assets/icons/blank-user.jpg'"/>
                        {{else}}
                            <img class="img-circle media-object thumbnail standard thumb-lg" src="{{#if photo}}{{photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
                        {{/isGoogleImage}}
                    {{/if}}
                </div>
                <div class="col-xs-12">
                    <div class="col-xs-12">
                        <div class="mb20"></div>
                        <h3 class="profile-name">{{contact.first}} {{contact.middle}} {{contact.last}}
                            <span class="leaf-scale" data-container="body" data-toggle="popover" data-placement="top" data-title="Leaf Score 3/5" data-content="<ul><li class='strike'>Visited Website</li><li class='strike'>Signed up for Newsletter</li><li class='strike'>Viewed Tour</li><li>Purchased > $100</li><li>Refered Friend</li></ul>">
                                <i class="fa fa-leaf"></i>
                                <i class="fa fa-leaf"></i>
                                <i class="fa fa-leaf"></i>
                                <i class="fa fa-leaf text-muted"></i>
                                <i class="fa fa-leaf text-muted"></i>
                            </span>
                        </h3>
                        <div class="mb20"></div>
                        <h4 class="center">
                            <span class="label label-info contact-cat">{{contactTypeLabel contact}}</span>
                        </h4>
                        <hr class="clear mb20"></hr>
                        <!-- Key Performance Indicators -->
                        <div class="customer-status">
                            <div class="row">
                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="12 Days ago Robin visited your website.">
                                        <a href="#">
                                            <div class="circle-tile-heading dark-blue">
                                                <i class="fa fa-bolt fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Last Active
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>12 days</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="Robin has purchased $384 of products/services from you.">
                                        <a href="#">
                                            <div class="circle-tile-heading green">
                                                <i class="fa fa-money fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Purchased
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>$384</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="visible-xs col-xs-12 mb30"></div>

                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="Robin opened 3 out of the 5 emails you sent.">
                                        <a href="#">
                                            <div class="circle-tile-heading orange">
                                                <i class="fa fa-envelope fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Emails Opened
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>3/5</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="You have made 10  phonecalls to Robin.">
                                        <a href="#">
                                            <div class="circle-tile-heading blue">
                                                <i class="fa fa-phone fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Calls Made
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>10</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="visible-xs col-xs-12 mb30"></div>

                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="Robin has been a customer since 24 January, 2014">
                                        <a href="#">
                                            <div class="circle-tile-heading red">
                                                <i class="fa fa-calendar fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Customer Since
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>JAN 14</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <div class="circle-tile tooltips" data-toggle="tooltip" data-placement="bottom" title="Robin has mentioned you 7 times on social networks">
                                        <a href="#">
                                            <div class="circle-tile-heading purple">
                                                <i class="fa fa-comments fa-fw fa-2x"></i>
                                            </div>
                                        </a>
                                        <div class="circle-tile-content">
                                            <div class="circle-tile-description">
                                                Mentions
                                            </div>
                                            <div class="circle-tile-number">
                                                <p>7</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="visible-xs col-xs-12 mb30"></div>

                            </div>
                        </div>

                    </div>
                </div>
                <div class="clearfix mb20"></div>
                <div class="col-xs-12">
                    <ul class="social-list right row">
                        <li class="col-xs-12">
                            <div class="col-xs-2">
                                <a href="https://www.google.com/maps/place/700+E+Ocean+Blvd/@33.765741,-118.184199,17z/" class="tooltips pull-left" data-toggle="tooltip" data-placement="top" title="" data-original-title="Location" target="_blank"><i class="fa fa-map-marker"></i></a>
                            </div>
                            <div class="col-xs-8">
                                <p>123 Burgandy Drive San Diego, CA 92102</p>
                            </div>
                            <div class="col-xs-2">
                                <button href="#" class="btn btn-sm btn-warning"><i class="fa fa-chevron-down"></i> <span class="hidden-xs"> 5 More</span></button>
                            </div>
                        </li>

                        {{#each contact.details}}
                            {{#each phones}}
                                <li class="col-xs-12">
                                    <div class="col-xs-2">
                                        <a href="tel:{{number}}" class="tooltips pull-left" data-toggle="tooltip" data-placement="top" title="" data-original-title="Phone" target="_blank"><i class="fa fa-phone"></i></a>
                                    </div>
                                    <div class="col-xs-8">
                                        <p>{{number}}</p>
                                        <small>{{phoneTypeLabel type}}</small>
                                    </div>
                                    <div class="col-xs-2">
                                        <button href="#" class="btn btn-sm btn-warning btn-more-phones"><i class="fa fa-chevron-down"></i> <span class="hidden-xs"> 2 More</span></button>
                                    </div>
                                    </a>
                                </li>
                            {{/each}}
                        {{/each}}

                        {{#each contact.details}}
                            {{#each emails}}
                                    <li class="col-xs-12 li-email {{#if @first}}first{{/if}}">
                                        <div class="col-xs-2">
                                            <a href="" class="tooltips pull-left" data-toggle="tooltip" data-placement="top" title="" data-original-title="Email" target="_blank"><i class="fa fa-envelope"></i></a>
                                        </div>
                                        <div class="col-xs-8">
                                            <p>{{email}}</p>
                                        </div>
                                        <div class="col-xs-2">
                                            {{#if @first}}
                                            <button href="#" class="btn btn-sm btn-warning btn-more-emails"><i class="fa fa-chevron-down"></i> <span class="hidden-xs"> {{ emails.length }} More</span></button>
                                            {{/if}}
                                        </div>
                                        </a>
                                    </li>
                            {{/each}}
                        {{/each}}

                        <li class="col-xs-12">
                            <div class="col-xs-2">
                                <a href="https://www.facebook.com/theronburgandy" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a>
                            </div>
                            <div class="col-xs-10">
                                <p>henryholmes@gmail.com</p>
                            </div>
                        </li>

                        <li class="col-xs-12">
                            <div class="col-xs-2">
                                <a href="https://twitter.com/RobinBurgundy" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Twitter"><i class="fa fa-twitter"></i></a>
                            </div>
                            <div class="col-xs-10">
                                <p>HenryHolmes</p>
                            </div>
                        </li>

                        <li class="col-xs-12">
                            <div class="col-xs-2">
                                <a href="http://www.linkedin.com/pub/ron-burgundy/74/415/b0b" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a>
                            </div>
                            <div class="col-xs-10">
                                <p>henry-holmes</p>
                            </div>
                        </li>
                    </ul>

                    <div class="mb20"></div>

                </div>
                <div class="clearfix"></div>
    </div>
</script>


<script type="text/x-handlebars-template" name="contact-activity-2net_weight">
    <li>
        <div class="smart-timeline-icon">
            <i class="fa fa-bar-chart-o"></i>
        </div>
        <div class="smart-timeline-time">
            <small>{{time}}</small>
        </div>
        <div class="smart-timeline-content">
            <p>
                    <span class="label label-default">Biometric Data</span> from 2Net Scale
            </p>
            <p>
                {{#each values}}
                    <h3>{{this.value}}</h3>
                    <span>{{this.valueTypeId}} </span>
                {{/each}}
            </p>
            <p>
                <a href="javascript:void(0);" class="btn btn-xs btn-green"><i class="fa fa-file"></i> View Graph</a>
            </p>
        </div>
    </li>
</script>

<script type="text/x-handlebars-template" name="contact-activity-default">
    <li>
        <div class="smart-timeline-icon">
            <img src="../images/theme-1/woman-1.jpg" width="32" height="32">
        </div>
        <div class="smart-timeline-time">
            <small>{{time}}</small>
        </div>
        <div class="smart-timeline-content">
            <p>
                <a href="javascript:void(0);">
                    <span class="label label-default">Biometric Data</span> from {{contact.first}} {{contact.middle}} {{contact.last}}
                </a>
            </p>
            <p>
                ID: {{_id}}
                </br>
                Device ID: {{deviceId}}
                </br>
                Contact ID: {{contactId}}
                </br>
                External ID: {{externalId}}
                </br>
                Reading Type: {{readingTypeId}}
                </br>
                Time: {{time}}
                </br>
                End Time: {{endTime}}
                </br>
                {{#each values}}
                    Value Type: {{this.valueTypeId}} </br>
                    Value: {{this.value}}
                {{/each}}
            </p>
            <p>
                <a href="javascript:void(0);" class="btn btn-xs btn-green"><i class="fa fa-file"></i> View Graph</a>
            </p>
        </div>
    </li>
</script>
<!-- END CONTACT DETAILS VIEW -->


<!--
CONTACTS EDIT VIEW
-->
<script type="text/x-handlebars-template" name="contact-edit-main">
   <div class="pageheader row">
            <div class="col-xs-8">
                <button id="btn-back-to-contact" class="btn btn-success pull-left" type="button">
                    <span class="fa fa-chevron-left"></span>
                    <span class="hidden-xs">Back</span>
                </button>
                <h2><i class="fa fa-users"></i> Add Contact</h2>
            </div>

            <div class="col-xs-4">
                <div class="btn btn-success pull-right btn-save-contact" type="button">
                    <i class="fa fa-save"></i>
                    <span class="hidden-xs">Save</span>
                </div>


            </div>
        </div>
        <div id="contact-edit-container" class="contentpanel">
            <div class="row">
                <div class="col-md-6">
                    <div class="hidden-xs hidden-sm">
                        <h4>
                            Name & Photo
                        </h4>
                        <hr/>
                    </div>

                    <div class="row">
                        <!-- UPDATE NAME -->
                        <div class="col-xs-12 form" role="form">
                            <div class="form-group">
                                <label class="">Contact Name</label>
                                <input id="input-fullname" type="text" class="form-control" value="{{contact.first}} {{contact.middle}} {{contact.last}}" placeholder="full name">
                                <small style="margin-left:10px;">
                                    <strong>first:</strong>
                                    <code>
                                        <span id="hint-first">{{contact.first}}</span>
                                    </code>
                                    <strong>middle:</strong>
                                    <code>
                                        <span id="hint-middle">{{contact.middle}}</span>
                                    </code>
                                    <strong>last:</strong>
                                    <code>
                                        <span id="hint-last">{{contact.last}}</span>
                                    </code>
                                </small>
                            </div>

                            <div class="row">
                                <div class="form-group col-xs-6">
                                    <label>Contact Type</label>
                                    <select id="select-contact-type" class="form-control">
                                        {{#contactTypeOptions}}
                                        <option data-contacttype="{{data}}" {{#equals data ../contact.type}}selected{{/equals}}>{{label}}</option>
                                        {{/contactTypeOptions}}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- UPDATE PHOTO -->
                    <div id="contact-photo-container" class="row">
                        <row>
                            <div class="col-xs-5 col-md-6">
                                <div class="hidden-xs hidden-sm">
                                    <div class="btn-link btn-edit-photo">Change Photo</div>
                                </div>
                                <img id="contact-photo" class="img-responsive img-rounded hand btn-edit-photo" src="{{#if contact.photo}}{{contact.photo}}{{else}}/assets/icons/blank-user.jpg{{/if}}">
                            </div>

                            <div class="col-xs-7 col-md-6">
                                <div class="btn-edit-photo-controls hidden-md hidden-lg">
                                    <div class="btn btn-primary btn-remove-photo">Remove Photo</div>
                                    <div class="btn btn-primary btn-upload-photo">Upload Photo</div>
                                </div>
                            </div>
                        </row>
                    </div>
                </div>

                <!-- CONTACT DETAILS -->
                <div class="col-md-6">
                    <h4>Contact Information</h4>
                    <hr/>

                    <div id="phone-row" class="row">
                        <div class="col-xs-1"><i class="icon-main fa fa-phone" />
                        </div>
                        <div class="col-xs-10">
                            <div id="edit-phones-container">
                                {{#each contact.details}} {{#canEditContactDetails this}} {{#each ../phones}} {{> edit-phone}} {{/each}} {{else}} {{#each phones}}
                                <div>
                                    <a href="tel:+1{{number}}">+1 {{number}}</a>
                                    <small>{{phoneTypeLabel type}}</small>
                                    <i class="icon-social {{iconFromSocialType ../type}}" />
                                </div>
                                {{/each}} {{/canEditContactDetails}} {{/each}}

                                <!-- ADD NEW PHONE -->
                                {{> edit-phone}}
                            </div>
                            <span style="margin-top:-15px;" class="col-xs-10">
                                <small>e.g. (303-555-5555)</small>
                            </span>
                        </div>

                    </div>

                    <div id="address-row" class="row">
                        <div class="col-xs-1"><i class="icon-main fa fa-map-marker" />
                        </div>
                        <div class="col-xs-10">
                            <div id="edit-addresses-container">
                                {{#each contact.details}} {{#canEditContactDetails this}} {{> edit-addresses}} {{else}} {{#each addresses}}
                                <div class="edit-address-container" id="{{_id}}">
                                    {{#if address}}
                                    <div>{{address}}</div>
                                    {{/if}} {{#if address2}}
                                </div>
                                {{address2}}
                            </div>
                            {{/if}}
                            <div>
                                {{city}} {{#if state}}, {{state}}{{/if}} {{#if zip}}, {{zip}}{{/if}} {{#if country}}, {{country}}{{/if}}
                                <i class="icon-social {{iconFromSocialType ../../type}}" />
                            </div>

                            {{> edit-default-shipping-billing}}
                        </div>
                        {{/each}} {{/canEditContactDetails}} {{/each}}
                    </div>

                    <br/>

                    <div id="btn-new-address" class="btn btn-primary btn-sm">Add Address</div>
                </div>
            </div>

            <div id="email-row" class="row">
                <div class="col-xs-1"><i class="icon-main fa fa-envelope" />
                </div>
                <div class="col-xs-10">
                    <div id="edit-emails-container">
                        {{#each contact.details}} {{#canEditContactDetails this}} {{#each emails}} {{> edit-email}} {{/each}} {{else}} {{#each emails}} {{#if this}}
                        <a href="mailto:{{this}}">{{this}}</a> <i class="icon-social {{iconFromSocialType ../../type}}" />{{/if}} {{/each}} {{/canEditContactDetails}} {{/each}} {{> new-email-partial}}
                    </div>
                </div>
            </div>
        </div>

        <!-- BioMetric Data -->
        <div class="col-md-6">
            <h4>BioMetric Information</h4>
            {{#unless contact.devices.length}}
             <a href="#" class="btn btn-primary btn-sm btn-subscribe-two-net">Subcribe Two Net</a>
            {{/unless}}
            <hr/>
            <div id="edit-devices-container">
                {{#each contact.devices}}
                    {{serialNumber}}
                    {{deviceTypeId}}
                {{/each}}
            </div>
            <div id="btn-new-device" class="btn btn-primary btn-sm">Add Device</div>
        </div>
        <!-- End BioMetric Data -->

        </div>
        </div>

        <div class="modal fade" id="modal-change-photo" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" data-dismiss="modal">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Add or Remove Photo</h4>
                    </div>

                    <div class="modal-body">
                        <div class="row">
                            <div class="btn btn-primary col-xs-12 btn-remove-photo">Remove Photo</div>
                        </div>

                        <div class="row" style="margin-top:6px; margin-bottom:20px;">
                            <div id="btn-upload-photo-modal" class="btn btn-primary col-xs-12">Upload new photo</div>
                        </div>

                        <div id="upload-photo-container" />

                        <img id="contact-photo-modal" src="{{contact.photo}}" style="max-width:100%; margin-top:20px;" />
                    </div>
                </div>
            </div>
    </div>

</script>
<!-- END CONTACT EDIT VIEW -->


<script type="text/x-handlebars-template" name="new-phone">
    {{> edit-phone}}
</script>


<script type="text/x-handlebars-template" name="edit-phone" partial="true">
    <div class="row edit-phone-container" data-id="{{_id}}" style="margin-top:8px;">
        <div class="form-group col-xs-12 col-sm-8 col-md-10">
            <div class="input-group">
                <div class="input-group-addon">+1</div>
                <input type="text" class="input-edit-phone form-control" value="{{number}}"/>

                <div class="btn-group pull-right" style="margin-right:8px;">
                    <button type="button" class="btn-edit-phone-type btn btn-default dropdown-toggle" data-toggle="dropdown" data-type="{{type}}">
                        <span class="edit-phone-type-label">{{phoneTypeLabel this}}</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu pull-right">
                        {{#phoneTypeOptions}}
                        <li class="li-edit-phone-type" data-type="{{data}}"><a href="#">{{label}}</a></li>
                        {{/phoneTypeOptions}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>


<script type="text/x-handlebars-template" name="new-email">
    {{> new-email-partial}}
</script>


<script type="text/x-handlebars-template" name="edit-email" partial="true">
    <div class="row edit-email-container">
        <div class="form-group">
            <input type="email" class="form-control input-edit-email" placeholder="new email" value="{{this}}" data-email="{{this}}"/>
        </div>
    </div>
</script>


<script type="text/x-handlebars-template" name="new-email-partial" partial="true">
    <div class="row edit-email-container">
        <div class="form-group">
            <input type="email" class="form-control input-edit-email" placeholder="new email" value="" data-email=""/>
        </div>
    </div>
</script>


<script type="text/x-handlebars-template" name="new-address">
    {{> edit-address}}
</script>


<script type="text/x-handlebars-template" name="edit-addresses" partial="true">
    {{#each addresses}}
    {{> edit-address}}
    {{/each}}
</script>


<script type="text/x-handlebars-template" name="edit-address" partial="true">
    <div class="edit-address-container" data-id="{{_id}}">
        <div class="form form-horizontal">
            <div class="fg-address-string form-group">
                <label>Address</label>
                <input type="text" class="form-control input-address-string" value="{{displayName}}">
                <small>
                    <span class="address-display-name hidden">{{displayName}}</span>

                    <div class="btn-link btn-edit-address-fields">Modify</div>
                </small>
            </div>
            <div class="edit-address-fields hidden">
                <div class="form-group">
                    <label>Street Address</label>
                    <input type="text" class="form-control input-address input-address-field" value="{{address}}">
                </div>

                <div class="form-group">
                    <label>Suite / Apt</label>
                    <input type="text" class="form-control input-address2 input-address-field" value="{{address2}}">
                </div>

                <div class="form-group">
                    <label>City, State, Zip</label>
                    <input type="text" class="form-control input-city input-address-field" value="{{city}}">
                    <input type="text" class="form-control input-state input-address-field" value="{{state}}">
                    <input type="text" class="form-control input-zip input-address-field" value="{{zip}}">

                    <small>
                        <span class="address-display-name">{{displayName}}</span>

                        <div class="btn-link btn-cancel-edit-address-fields">Close</div>
                    </small>
                </div>
            </div>
        </div>
        {{> edit-default-shipping-billing}}
    </div>
</script>


<script type="text/x-handlebars-template" name="edit-default-shipping-billing" partial="true">
    <div class="hidden-xs hidden-sm">
        <div class="checkbox">
            <label>
                <input class="chk-default-shipping" type="checkbox" {{#if defaultShipping}}checked{{/if}}/> Default
                Shipping
            </label>
        </div>

        <div class="checkbox">
            <label>
                <input class="chk-default-billing" type="checkbox" {{#if defaultBilling}}checked{{/if}}/> Default
                Billing
            </label>
        </div>
    </div>

    <div class="hidden-md hidden-lg" style="margin-top:10px">
        <div class="btn-default-shipping btn btn-md {{#if defaultShipping}}default{{/if}}">Default Shipping
            <i class="fa fa-check"/></div>
        <div class="btn-default-billing btn btn-md {{#if defaultBilling}}default{{/if}}">Default Billing
            <i class="fa fa-check"/></div>
    </div>
</script>

<script type="text/x-handlebars-template" name="new-device">
    {{> edit-device}}
</script>

<script type="text/x-handlebars-template" name="edit-device" partial="true">

    <div class="row edit-device-container" data-id="{{_id}}" style="margin-top:8px;">
        <div class="form-group col-xs-12 col-sm-8 col-md-10">
            <div class="input-group">
                <input type="text" class="input-device-phone form-control" value="" placeholder="Enter Device Serial #"/>

                <div class="btn-group pull-right" style="margin-right:8px;">
                    <button type="button" class="btn-edit-device-type btn btn-default dropdown-toggle" data-toggle="dropdown" data-type="{{type}}">
                        <span class="edit-device-type-label"> </span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu pull-right">
                        {{#deviceTypeOptions}}
                        <li class="li-edit-phone-type" data-type="{{data}}"><a href="#">{{label}}</a></li>
                        {{/deviceTypeOptions}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>


<!--
HELPERS
-->
<script type="text/javascript">
    Handlebars.registerHelper("eachLetter", function (options) {
        var charCode = "A".charCodeAt();
        var str = "";
        for (var i = 0; i < 26; i++) {
            this.letter = String.fromCharCode(charCode);
            str += options.fn(this);
            charCode++;
        }
        return str;
    });


    Handlebars.registerHelper("contactTypeLabel", function (contact) {
        if (contact == null) {
            contact = this;
        }
        var contactTypes = $$.constants.contact.contact_types.dp;
        var type = _.find(contactTypes, function (type) {
            return type.data === contact.type
        });
        return type == null ? "" : type.label;
    });


    Handlebars.registerHelper("phoneTypeLabel", function (phone) {
        if (phone == null) {
            phone = this;
        }
        var phoneType = phone.hasOwnProperty("type") ? phone.type : phone;

        var phoneTypes = $$.constants.contact.phone_types.dp;
        var type = _.find(phoneTypes, function (type) {
            return type.data === phoneType
        });
        return type == null ? "mobile" : type.label;
    });


    Handlebars.registerHelper("contactTypeOptions", function (options) {
        var contactTypes = $$.constants.contact.contact_types.dp;

        var str = "";
        for (var i = 0, l = contactTypes.length; i < l; i++) {
            str += options.fn(contactTypes[i]);
        }
        return str;
    });


    Handlebars.registerHelper("phoneTypeOptions", function (options) {
        var phoneTypes = $$.constants.contact.phone_types.dp;

        var str = "";
        for (var i = 0, l = phoneTypes.length; i < l; i++) {
            str += options.fn(phoneTypes[i]);
        }
        return str;
    });


    Handlebars.registerHelper("canEditContactDetails", function (contactDetails, options) {
        if (contactDetails.type == $$.constants.contact.detail_types.LOCAL) {
            return options.fn(this);
        } else {
            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("unlessHasLocalPhone", function (contact, options) {
        if (contact && contact.details != null) {
            var localDetails = _.find(contact.details, function (details) {
                return details.type === $$.constants.contact.detail_types.LOCAL
            });
            if (localDetails != null && localDetails.phones != null && localDetails.phones.length > 0) {
                return options.inverse(this);
            }
        }
        return options.fn(this);
    });


    Handlebars.registerHelper("unlessAddressIsEmpty", function (address, options) {
        if (address) {
            if (String.isNullOrEmpty(address.address) && String.isNullOrEmpty(address.address2) && String.isNullOrEmpty(address.city)
                    && String.isNullOrEmpty(address.state) && String.isNullOrEmpty(address.zip) && String.isNullOrEmpty(address.country)) {
                return options.inverse(this);
            } else {
                return options.inverse(this);
            }
        } else {
            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("getBestEmail", function(contact, options) {
        if (contact.details != null && contact.details.length > 0) {
            //see if we have a google contact, that's the best source of email
            var details = _.findWhere(contact.details, { type: $$.constants.social.types.GOOGLE });
            if (details != null && details.emails != null && details.emails.length > 0) {
                this.$email = details.emails[0];
                return options.fn(this);
            }

            for(var i = 0; i < contact.details.length; i++) {
                var details = contact.details[0];
                if (details != null && details.emails != null && details.emails.length > 0) {
                    this.$email = details.emails[0];
                    return options.fn(this);
                }
            }
            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("getFacebookId", function(contact, options) {
        if (contact.details != null && contact.details.length > 0) {
            //see if we have a google contact, that's the best source of email
            var details = _.findWhere(contact.details, { type: $$.constants.social.types.FACEBOOK });
            if (details != null) {
                this.$facebookId = details.socialId;
                return options.fn(this);
            }

            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("getTwitterId", function(contact, options) {
        if (contact.details != null && contact.details.length > 0) {
            //see if we have a google contact, that's the best source of email
            var details = _.findWhere(contact.details, { type: $$.constants.social.types.TWITTER });
            if (details != null) {
                this.$twitterId = details.socialId;
                return options.fn(this);
            }

            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("getLinkedInId", function(contact, options) {
        if (contact.details != null && contact.details.length > 0) {
            //see if we have a google contact, that's the best source of email
            var details = _.findWhere(contact.details, { type: $$.constants.social.types.LINKEDIN });
            if (details != null) {
                if (details.websites != null && details.websites.length > 0) {
                    for (var i = 0; i < details.websites.length; i++) {
                        if (details.websites[i] != null) {
                            this.$linkedInUrl = details.websites[i];
                            return options.fn(this);
                        }
                    }
                }
                this.$linkedInId = details.socialId;
                return options.fn(this);
            }

            return options.inverse(this);
        }
    });


    Handlebars.registerHelper("getAddress", function(contact, options) {
        var _address = null;
        if (contact.details != null && contact.details.length > 0) {
            for (var i = 0; i < contact.details.length; i++) {
                var details = contact.details[i];
                if (details.addresses != null && details.addresses.length > 0) {
                    for (var j = 0; j < details.addresses.length; j++) {
                        var address = details.addresses[j];
                        if (address) {
                            if (address.displayName != null) {
                                this.$address = encodeURIComponent(address.displayName);
                                return options.fn(this);
                            } else {
                                if (_address == null) {
                                    _address = address;
                                } else {
                                    if (address.address != null && address.city != null) {
                                        _address = address;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        if (_address != null) {
            var addressStr = "";
            if (String.isNullOrEmpty(_address.address)) {
                addressStr += _address.address;
            }

            if (String.isNullOrEmpty(_address.city)) {
                addressStr += ", " + address.city;
            }

            if (String.isNullOrEmpty(_address.state)) {
                addressStr += ", " + address.state;
            }

            if (String.isNullOrEmpty(_address.zip)) {
                addressStr += ", " + _address.zip;
            }

            this.$address = encodeURIComponent(addressStr);
            return options.fn(this);
        }

        return options.inverse(this);
    });


    Handlebars.registerHelper("contactSources", function(contact, options) {

    });

    Handlebars.registerHelper("isGoogleImage", function (photo, options) {
        if (String.isNullOrEmpty(photo) == false && photo.indexOf("www.google.com/m8") > -1) {
            return options.fn(this);
        } else {
            return options.inverse(this);
        }
    });
</script>