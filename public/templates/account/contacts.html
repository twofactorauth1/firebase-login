<script type="text/x-handlebars-template" name="contacts-main">
    <div id="contacts-main-container">

        <div class="row">
            <strong style="font-size:1.5em; text-align:center" class="col-xs-2 col-sm-offset-5">Contacts</strong>

            <div class="col-xs-1 col-xs-offset-9 visible-xs">
                <div class="btn-link" style="font-size:2em; text-align:">+</div>
            </div>

            <div class="hidden-xs" style="margin-bottom:5px;">
                <button type="button" class="btn btn-primary btn-sm hidden-xs">Add contact</button>
            </div>
        </div>


        <div class="form form-horizontal">
            <div class="form-group">
                <label class="col-xs-1 hidden-md hidden-lg col-sm-1 control-label">{{currentLetter}}</label>
                <div class="col-xs-11 col-sm-11 col-md-12">
                    <input type="text" placeholder="search contacts" class="form-control col-xs-12"/>
                </div>
            </div>
        </div>

        {{> contact-paginator}}

        <div class="row">
            <ul class="pull-right hidden-md hidden-lg unstyled col-sm-1" style="margin-top:15px;">
                {{#eachLetter}}
                <li><a class="btn-letter" href="#">{{letter}}</a></li>
                {{/eachLetter}}
            </ul>

            <div id="contacts-container" class="col-sm-11 col-md-12">
                {{#each contacts}}
                <div class="col-xs-11 col-sm-6 col-md-4 contact-thumbnail">
                    <div class="inner">
                        <strong>{{first}} {{last}}</strong> <span class="visible-inline-xs"><small>{{contactTypeLabel}}</small></span>
                        <div class="hidden-xs"><small>{{contactTypeLabel}}</small></div>

                        <div class="contacts-photo-container">
                            <img class="img-circle" src="{{#if photo}}{{photo}}{{else}}/assets/icons/blank-user.jpeg{{/if}}">
                        </div>

                        <div class="hidden-xs contact-thumbnail-details">
                            <div>Last Active: </div>
                            <div>Purchased: </div>
                            <div>Emails Opened: </div>
                            <div>Calls Made: </div>
                        </div>
                    </div>
                </div>
                {{else}}

                <div class="visible-xs col-xs-10">
                    <h3>No Records Available</h3>
                </div>

                <div class="visible-xs btn btn-primary col-xs-8">Add a new contact</div>
                {{/each}}

                {{#iterateDifference min count 0}}
                <div class="col-xs-11 col-sm-6 col-md-4 contact-thumbnail hidden-xs">
                    <div class="inner">
                        <strong>Create new Contact</strong>

                        <div class="contacts-photo-container">
                            <img class="img-circle" src="/assets/icons/blank-user.jpeg">
                        </div>

                        <div class="hidden-xs">
                            <div class="btn btn-success btn-add-contact">Add Contact</div>
                        </div>

                    </div>
                </div>
                {{/iterateDifference}}
            </div>
        </div>


        {{> contact-paginator}}
    </div>
</script>


<script type="text/x-handlebars-template" name="contact-paginator" partial="true">
    <ul class="pagination hidden-sm hidden-xs">
        {{#eachLetter}}
        <li class="{{#check currentLetter letter}}active{{/check}}"><a class="btn-letter" href="#">{{letter}}</a></li>
        {{/eachLetter}}
    </ul>
</script>


<script type="text/javascript">
    Handlebars.registerHelper("eachLetter", function(options) {
        var charCode = "A".charCodeAt();
        var str = "";
        for (var i = 0; i < 26; i++) {
            this.letter = String.fromCharCode(charCode);
            str += options.fn(this);
            //str += options.fn(String.fromCharCode(charCode));
            charCode++;
        }
        return str;
    });


    Handlebars.registerHelper("contactTypeLabel", function() {
        switch(this.type) {
            case "cu": return "Customer";
            case "co": return "Colleague";
            case "fr": return "Friend";
            case "mb": return "Member";
            case "fa": return "Family";
            case "ad": return "Admin";
        }
    });
</script>