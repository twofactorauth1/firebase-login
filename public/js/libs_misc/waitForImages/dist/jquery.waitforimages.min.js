!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.waitForImages={hasImageProperties:["backgroundImage"],hasImageAttributes:["srcset"]},e.expr[":"]["has-src"]=function(r){return e(r).is('img[src][src!=""]')},e.expr[":"].uncached=function(r){return!!e(r).is(":has-src")&&!r.complete},e.fn.waitForImages=function(){var r,s,t,i=0,n=0,a=e.Deferred();if(e.isPlainObject(arguments[0])?(t=arguments[0].waitForAll,s=arguments[0].each,r=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?t=arguments[0]:(r=arguments[0],s=arguments[1],t=arguments[2]),r=r||e.noop,s=s||e.noop,t=!!t,!e.isFunction(r)||!e.isFunction(s))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var c=e(this),o=[],u=e.waitForImages.hasImageProperties||[],h=e.waitForImages.hasImageAttributes||[],f=/url\(\s*(['"]?)(.*?)\1\s*\)/g;t?c.find("*").addBack().each(function(){var r=e(this);r.is("img:has-src")&&!r.is("[srcset]")&&o.push({src:r.attr("src"),element:r[0]}),e.each(u,function(e,s){var t,i=r.css(s);if(!i)return!0;for(;t=f.exec(i);)o.push({src:t[2],element:r[0]})}),e.each(h,function(e,s){if(!r.attr(s))return!0;o.push({src:r.attr("src"),srcset:r.attr("srcset"),element:r[0]})})}):c.find("img:has-src").each(function(){o.push({src:this.src,element:this})}),i=o.length,n=0,0===i&&(r.call(c[0]),a.resolveWith(c[0])),e.each(o,function(t,o){var u=new Image,h="load.waitForImages error.waitForImages";e(u).one(h,function t(u){var f=[n,i,"load"==u.type];if(n++,s.apply(o.element,f),a.notifyWith(o.element,f),e(this).off(h,t),n==i)return r.call(c[0]),a.resolveWith(c[0]),!1});var f="?v="+(new Date).getTime();o.srcset&&(o.srcset=o.srcset+f,u.srcset=o.srcset),o.src&&(o.src=o.src+f),u.src=o.src})}),a.promise()}});