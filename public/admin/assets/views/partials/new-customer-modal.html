<script type="text/ng-template" id="new-customer-modal">

    <div class="modal-header">
        <button type="button" class="close" ng-click="closeModal()">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
        </button>
        <h3 class="modal-title">New customer</h3>
    </div>
    <div class="modal-body customer-modal bg-white">
        <form action="#" name="form" role="form" id="form">
            <div class="form-group">
                <label class="">Contact Name</label>
                <input id="input-fullname" class="form-control" ng-model="$parent.fullName" placeholder="full name" type="text">
                <small class="help-block">
                    <strong>first:</strong>
                    <code>
                        <span id="hint-first">{{customer.first}}</span>
                    </code>
                    <strong>middle:</strong>
                    <code>
                        <span id="hint-middle">{{customer.middle}}</span>
                    </code>
                    <strong>last:</strong>
                    <code>
                        <span id="hint-last">{{customer.last}}</span>
                    </code>
                </small>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : form.email.$invalid && !form.email.$pristine || duplicateCustomer }">
                <label class="">Contact Email</label>
                <input type="email" ng-change="setDuplicateUser(false)"  ng-pattern="formValidations.email" placeholder="email address" class="form-control" name="email" ng-model="customer.email" >
                    <p ng-show="form.email.$invalid && !form.email.$pristine" class="help-block">Enter a valid email.</p>
                    <p ng-show="!form.email.$invalid && duplicateCustomer" class="help-block">Email already exists.</p>
            </div>
            <div class="form-group">
                <label>
                    Tags
                </label>
                <ui-select multiple ng-model="customer.tags" theme="bootstrap" ng-disabled="disabled">
                    <ui-select-match placeholder="Select tags...">{{$item.label}}</ui-select-match>
                    <ui-select-choices repeat="tag in customerTags | orderBy:'label' | filter:$select.search">
                        {{tag.label}}
                    </ui-select-choices>
                </ui-select>
            </div>
        </form>
    </div>
    <div class="clearfix"></div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="!customer.first || !customer.tags.length > 0 || saveLoading || !customer.email || (form.$invalid && !form.$pristine )" ng-click="addCustomer()">Add Customer</button>
    </div>

</script>
