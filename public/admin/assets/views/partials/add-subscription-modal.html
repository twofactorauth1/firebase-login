<script type="text/ng-template" id="add-subscription-modal">
    <div class="modal-header">
        <button type="button" class="close" ng-click="closeModal(editingPlan)">&times;</button>
        <h4 class="modal-title">
            <span ng-if="!editingPlan">Add Subscription</span>
            <span ng-if="editingPlan">Edit Subscription</span>
        </h4>
    </div>
    <div class="modal-body add-component-modal bg-white">
        <form name="subscriptionForm" novalidate>
            <div class="col-xs-12">
                <div class="form-group hidden">
                    <label for="planId">Unique ID</label>
                    <input ng-change="setFormDirtyFn()" type="text" class="form-control" id="planId" placeholder="Unique ID" ng-model='newSubscription.planId' />
                </div>
                <div class="form-group">
                    <label for="name">Name*</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter name for plan"><i class="fa fa-info-circle" /></span>
                    <div class="input-subscription">
                        <input type="text" name="name" class="form-control " id="name" placeholder="Name" ng-model='newSubscription.name' required />
                    </div>
                    <div class="error-container" ng-show="subscriptionForm.name.$dirty && subscriptionForm.name.$invalid ">
                        <small class="error" ng-show="subscriptionForm.name.$error.required">
                                                        Name for plan is required.
                                                    </small>
                    </div>
                </div>
                <div class="form-group">
                    <label for="statement_description">Statement Description</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter statement description for plan"><i class="fa fa-info-circle" /></span>
                    <div class="input-subscription">
                        <input ng-change="setFormDirtyFn()" type="text" class="form-control " id="statement_description" placeholder="Statement Description" ng-model='newSubscription.statement_description' maxlength="15" />
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="amount">Amount*</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter the amount for the plan."><i class="fa fa-info-circle" /></span>
                    <div class="input-group">
                        <span class="input-group-addon">$</span>
                        <input ng-change="setFormDirtyFn()" type="text" name="amount" class="form-control" id="amount" placeholder="Amount" ng-model='newSubscription.amount' required money/>
                    </div>
                    <div class="error-container" ng-show="subscriptionForm.amount.$dirty && subscriptionForm.amount.$invalid ">
                        <small class="error" ng-show="subscriptionForm.amount.$error.required">
                                                    Amount is required.
                                                </small>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup_fee">Signup Fee</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter a one time signup fee"><i class="fa fa-info-circle" /></span>
                    <div class="input-group input-subscription">
                        <span class="input-group-addon">$</span>
                        <input ng-change="setFormDirtyFn()" type="text" class="form-control " id="signup_fee" placeholder="Signup Fee" ng-model='$parent.signup_fee' />
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="interval">Interval*</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Select time interval"><i class="fa fa-info-circle" /></span>
                    <div class="input-subscription">
                        <select ng-change="setFormDirtyFn()" id="interval" name="interval" ng-model="newSubscription.interval" class="form-control " required>
                            <option value="">-- choose interval --</option>
                            <option value="week">Week</option>
                            <option value="month">Month</option>
                            <option value="year">Year</option>
                        </select>
                    </div>
                    <div class="error-container" ng-show="subscriptionForm.interval.$dirty && subscriptionForm.interval.$invalid ">
                        <small class="error" ng-show="subscriptionForm.interval.$error.required">
                                                        Please select Plan Interval.
                                                    </small>
                    </div>
                </div>
                <div class="form-group">
                    <label for="interval_count">Interval Count</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter a interval count for the interval type"><i class="fa fa-info-circle" /></span>
                    <div class="input-subscription">
                        <input ng-change="setFormDirtyFn()" type="number" name="interval_count" validation-type="interval_count" interval-count-validate="interval_count" class="form-control " id="interval_count" placeholder="Interval Count" ng-model='newSubscription.interval_count' />
                    </div>
                    <div class="error-container" ng-show="subscriptionForm.interval_count.$dirty && subscriptionForm.interval_count.$invalid ">
                        <small class="error" ng-show="subscriptionForm.interval_count.$error.maxInterval">That username is taken, please try another</small>
                    </div>
                </div>
                <div class="form-group">
                    <label for="trial_period_days">Trial Period Days</label>
                    <span tooltip-placement="top" tooltip-html-unsafe="Enter trial period days for plan"><i class="fa fa-info-circle" /></span>
                    <div class="input-subscription">
                        <input ng-change="setFormDirtyFn()" type="text" class="form-control " id="trial_period_days" placeholder="Trial Period Days" ng-model='newSubscription.trial_period_days' />
                    </div>
                </div>
            </div>
        </form>
        <div class="clearfix"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="subscriptionForm.$invalid || saveLoadingPlan" ng-click="editSubscriptionFn(newSubscription)" ng-if="editingPlan">
            Update
        </button>
        <button class="btn btn-success" ng-disabled="subscriptionForm.$invalid" ng-click="addSubscriptionFn(newSubscription, true)" ng-if="!editingPlan">
            <span class="fa fa-plus"></span> Add
        </button>
        <button class="btn btn-danger" ng-disabled="saveLoadingPlan" ng-click="editCancelFn()" ng-if="editingPlan">
            Cancel
        </button>
    </div>
</script>
