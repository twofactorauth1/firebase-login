<div class="col-sm-12" ng-show="product.fulfillment_email">
    <div>
        <div class="row">
            <div class="col-sm-8 col-sm-offset-2">
                <div class="well bg-primary margin-top-30">
                    <div class="padding-15 center">
                        <h2 class="StepTitle text-white text-bold"><i class="fa fa-envelope fa-2x fa-inverse block margin-bottom-10"></i> Content</h2>
                        <p class="margin-bottom-0 text-large">
                            Select an email from email templates.
                        </p>
                    </div>
                </div>


                <div class="form-group">
                    <label>
                        Email Template <span class="symbol required"></span>
                    </label>
                    <div class="well well-sm">
                        <div class="row">
                            <div class="col-xs-12">
                                <span ng-if="!emails.length">Loading... <b class="fa fa-spinner fa-spin"/></span>
                                <ui-select ng-if="emails.length" ng-model="product.emailSettings.emailId" theme="bootstrap" ng-disabled="disabled" on-select="changeCurrentEmail($select.selected)" search-enabled="true" style="min-width:100%">
                                    <ui-select-match placeholder="Select an email template">{{$select.selected.title}} (subject:{{$select.selected.subject}})</ui-select-match>
                                    <ui-select-choices repeat="email._id as email in emails | propsFilter: {title: $select.search}">
                                        <div ng-bind-html="email.title | highlight: $select.search"></div>
                                        <small>
                                        subject: <span ng-bind-html="''+email.subject | highlight: $select.search"></span>
                                      </small>
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="panel panel-white margin-top-5 margin-bottom-30">
                    <div class="panel-body no-padding">
                        <div class="padding-15">
                            
                            <div class="form-group margin-bottom-0">
                                <label class="control-label text-bold">
                                    From Name
                                </label>
                                <span editable-text="emailToSend.fromName">{{emailToSend.fromName || "From Name"}}</span>
                            </div>
                            <div class="form-group margin-bottom-0">
                                <label class="control-label text-bold">
                                    From Email
                                </label>
                                <span editable-email="emailToSend.fromEmail" e-required>{{emailToSend.fromEmail || "From Email"}}</span>
                            </div>
                            <div class="form-group margin-bottom-0">
                                <label class="control-label text-bold">
                                    Reply To
                                </label>
                                <span editable-email="emailToSend.replyTo">{{emailToSend.replyTo || "Reply To"}}</span>
                            </div>
                            <div class="form-group margin-bottom-0">
                                <label class="control-label text-bold">
                                    Bcc
                                </label>
                                <span editable-email="emailToSend.bcc">{{emailToSend.bcc || "Bcc"}}</span>
                            </div>
                            <div class="form-group margin-bottom-0">
                                <label class="control-label text-bold">
                                    Subject
                                </label>
                                <span editable-text="emailToSend.subject" onbeforesave="analyzeSubject($data)">{{emailToSend.subject || "Subject"}}</span>
                                <div class="clearfix"></div>
                            </div>
                            <div class="form-group margin-bottom-10" ng-if="emailToSend.subject" ng-show="subjectScore">
                                <label> <a href="#" style="color:#858585" ng-click="openModal('subject-score-modal')">Subject Strength <span class="fa fa-info-circle"></span></a></label>
                                <label class="pull-right text-bold" ng-class="{'text-danger': subjectScore<25, 'text-warning': subjectScore>=25 && subjectScore<50, 'text-info': subjectScore>=50 && subjectScore<75, 'text-nephritis': subjectScore>=75}">
                                    <span ng-if="subjectScore<30">Weak</span>
                                    <span ng-if="subjectScore>=30 && subjectScore<=50">Fair</span>
                                    <span ng-if="subjectScore>50 && subjectScore<80">Good</span>
                                    <span ng-if="subjectScore>=80">Strong</span> {{subjectScore}}%</label>
                                <progressbar value="subjectScore" animate="true" type="{{getProgressType(subjectScore)}}" class="progress-xs margin-bottom-0"></progressbar>
                            </div>
                            <a
                            ui-sref='app.emailEditor({id: product.emailSettings.emailId})'
                            class="btn btn-primary margin-top-15"
                            tooltip-placement="top"
                            tooltip-html="Make changes to this email in the editor."
                            ng-disabled="vm.uiState.disableEditing || !product.emailSettings.emailId">
                            <i class="fa fa-pencil-square-o"></i>
                            <span> Edit email content</span>
                        </a>
                        </div>
                        
                    </div>
                </div>    
                
            </div>
            
        </div>
    </div>
</div>



