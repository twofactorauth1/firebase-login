<script type="text/ng-template" id="new-contact-modal">

    <div class="modal-header">
        <button type="button" class="close" ng-click="closeModal()">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
        </button>
        <h3 class="modal-title">New Contact</h3>
    </div>
    <div class="modal-body contact-modal bg-white" stop-event="touchend">
        <form action="#" name="form" role="form" id="form">
            <div class="form-group">
                <label class="">Contact Name</label>
                <input id="input-fullname" class="form-control" ng-model="$parent.fullName" placeholder="full name" type="text">
                <small class="help-block">
                    <strong>first:</strong>
                    <code>
                        <span id="hint-first">{{contact.first}}</span>
                    </code>
                    <strong>middle:</strong>
                    <code>
                        <span id="hint-middle">{{contact.middle}}</span>
                    </code>
                    <strong>last:</strong>
                    <code>
                        <span id="hint-last">{{contact.last}}</span>
                    </code>
                </small>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : form.email.$invalid && !form.email.$pristine || duplicateContact }">
                <label class="">Contact Email</label>
                <input type="email" ng-change="setDuplicateUser(false)"  ng-pattern="formValidations.email" placeholder="email address" class="form-control" name="email" ng-model="contact.email" >
                    <p ng-show="form.email.$invalid && !form.email.$pristine" class="help-block">Enter a valid email.</p>
                    <p ng-show="!form.email.$invalid && duplicateContact" class="help-block">Email already exists.</p>
            </div>
            <div class="form-group">
                <label>
                    Tags
                </label>
                <ui-select multiple tagging="tagToContact" tagging-match-to-key="label" ng-model="contact.tags" theme="bootstrap" ng-disabled="disabled">
                    <ui-select-match placeholder="Select tags...">{{$item.label}}</ui-select-match>
                    <ui-select-choices repeat="tag in contactTags | orderBy:'label' | filter:$select.search" >
                        {{tag.label}}
                    </ui-select-choices>
                </ui-select>
            </div>
        </form>
    </div>
    <div class="clearfix"></div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="!contact.first || !contact.tags.length > 0 || saveLoading || !contact.email || (form.$invalid && !form.$pristine )" ng-click="addContact()">Add Contact</button>
    </div>

</script>
