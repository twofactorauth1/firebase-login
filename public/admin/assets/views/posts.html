<div ng-controller="PostsCtrl" class="posts">
    <!-- start: PAGE TITLE -->
    <section id="page-title">
        <div class="row">
            <div class="col-sm-8">
                <h1 class="mainTitle" translate="sidebar.nav.website.POSTS">{{ mainTitle }}</h1>
                <span class="mainDescription">There are currently {{posts.length}} posts.</span>
            </div>
            <div ncy-breadcrumb></div>
        </div>
    </section>
    <!-- end: PAGE TITLE -->
    <!-- start: CONTENT -->
    <div st-table="displayedposts" st-safe-src="posts">
        <div class="col-sm-12">
            <div class="panel panel-transparent row margin-bottom-0">
                <div class="panel-body">
                    <form role="form" class="ng-pristine ng-valid row">
                        <div class="col-sm-6 col-xs-12">
                            <div class="form-group">
                                <div class="col-xs-9">
                                    <span class="input-icon">
	                                    <input type="text" st-search placeholder="Search by title, handle, date..." id="form-field-14" class="form-control">
	                                    <i class="ti-search"></i>
	                                </span>
                                </div>
                                <div class="col-xs-3">
                                    <button type="button" class="btn btn-o btn-info btn-wide btn-scroll btn-scroll-top ti-filter ng-click-active pull-right" ng-click="showFilter = !showFilter">
                                        <span>Filter</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-xs-12">
                            <div class="form-group  pull-right">
                                <button type="button" class="btn btn-o btn-info btn-wide btn-scroll btn-scroll-top ti ti-plus ng-click-active" ng-click="openPageModal()">
                                    <span>New Post</span>
                                </button>
                            </div>
                            <div class="form-group">
                                <div class="btn-group tableView">
                                    <button class="btn btn-info" ng-class="{'active': tableView == 'list'}" href="" ng-click="tableView = 'list'" tooltip-placement="top" tooltip="List"> <span class="fa fa-th-list"></span> </button>
                                    <button class="btn btn-info" ng-class="{'active': tableView == 'grid'}" href="" ng-click="tableView = 'grid'" tooltip-placement="top" tooltip="Grid"> <span class="fa fa-th"></span> </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <table class="table table-striped table-hover" ng-class="{'grid': tableView == 'grid'}">
            <thead>
                <tr>
                    <th class="center">Featured Image</th>
                    <th st-sort="title">Title</th>
                    <th st-sort="handle">Handle</th>
                    <th class="hidden-xs" st-sort="status">Status</th>
                    <th class="hidden-xs" st-sort="getters.created">Created</th>
                    <th class="hidden-xs" st-sort="getters.modified">Modified</th>
                </tr>
                <tr ng-if="showFilter">
                    <th></th>
                    <th>
                        <input st-search="title" placeholder="Title" class="form-control" type="search" />
                    </th>
                    <th>
                        <input st-search="handle" placeholder="Handle" class="form-control" type="search" />
                    </th>
                    <th>
                        <input st-search="status" placeholder="Status" class="form-control" type="search" />
                    </th>
                    <th>
                        <input st-search="created" placeholder="Created" class="form-control" type="search" />
                    </th>
                    <th>
                        <input st-search="modified" placeholder="Modified" class="form-control" type="search" />
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="post in displayedposts" ng-click="viewSingle(post)">
                    <td class="center">
                        <img src="{{post.featured_image}}" class="img-thumbnail screenshot" alt="image">
                    </td>
                    <td><strong>Title: </strong>{{post.post_title | limitTo: 20 }}{{post.post_title.length > 20 ? '...' : ''}}</td>
                    <td class="hidden-xs"><strong>Handle: </strong>{{post.post_url | limitTo: 20 }}{{post.post_url.length > 20 ? '...' : ''}}</td>
                    <td class="hidden-xs"><strong>Status: </strong> {{post.post_status}}</td>
                    <td class="hidden-xs"><strong>Created: </strong> {{post.created.date | date:'MMM d yy'}}</td>
                    <td class="hidden-xs"><strong>Modified: </strong>{{post.modified.date | date:'MMM d yy'}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- end: CONTENT -->
    <!-- start: NEW PAGE MODAL -->
    <script type="text/ng-template" id="new-post-modal">
	    <div class="modal-header">
	        <button type="button" class="close" ng-click="cancel()">
	            <span aria-hidden="true">&times;</span>
	            <span class="sr-only">Close</span>
	        </button>
	        <h3 class="modal-title">New Post</h3>
	    </div>
	    <div class="modal-body posts-modal" ng-class="{'no-padding': !templateDetails}">
	        <tabset class="tabbable tabs-left margin-bottom-0" ng-hide="templateDetails">
	            <tab>
	                <tab-heading>
	                    All
	                </tab-heading>
	                <div ng-repeat="template in templates | orderBy:'title'">
	                    <div class="single-type margin-bottom-15" ng-click="setTemplateDetails(template)">
	                        <div class="col-xs-3">
	                            <div class="img-wrap">
	                                <span style="background: url('{{template.previewUrl}}');background-size: cover;height: 65px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
	                            </div>
	                        </div>
	                        <div class="col-xs-8">
	                            <h4>{{template.name}}</h4>
	                            <p>{{template.description}}</p>
	                        </div>
	                        <div class="col-xs-1">
	                            <h1>
				                    	<span class="fa fa-chevron-right"></span>
				                  	</h1>
	                        </div>
	                    </div>
	                    <div class="clearfix"></div>
	                    <hr>
	                </div>
	            </tab>
	            <tab>
	                <tab-heading>
	                    Home
	                </tab-heading>
	                <div ng-repeat="template in templates | orderBy:'title'" ng-if="template.filter == 'home'">
	                    <div class="single-type margin-bottom-15" ng-click="setTemplateDetails(template)">
	                        <div class="col-xs-3">
	                            <div class="img-wrap">
	                                <span style="background: url('{{template.previewUrl}}');background-size: cover;height: 65px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
	                            </div>
	                        </div>
	                        <div class="col-xs-8">
	                            <h4>{{template.name}}</h4>
	                            <p>{{template.description}}</p>
	                        </div>
	                        <div class="col-xs-1">
	                            <h1>
				                    	<span class="fa fa-chevron-right"></span>
				                  	</h1>
	                        </div>
	                    </div>
	                    <div class="clearfix"></div>
	                    <hr>
	                </div>
	            </tab>
	            <tab>
	                <tab-heading>
	                    Coming Soon
	                </tab-heading>
	                <div ng-repeat="template in templates | orderBy:'title'" ng-if="template.filter == 'coming-soon'">
	                    <div class="single-type margin-bottom-15" ng-click="setTemplateDetails(template)">
	                        <div class="col-xs-3">
	                            <div class="img-wrap">
	                                <span style="background: url('{{template.previewUrl}}');background-size: cover;height: 65px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
	                            </div>
	                        </div>
	                        <div class="col-xs-8">
	                            <h4>{{template.name}}</h4>
	                            <p>{{template.description}}</p>
	                        </div>
	                        <div class="col-xs-1">
	                            <h1>
				                    	<span class="fa fa-chevron-right"></span>
				                  	</h1>
	                        </div>
	                    </div>
	                    <div class="clearfix"></div>
	                    <hr>
	                </div>
	            </tab>
	        </tabset>
	        <div class="template-details" ng-show="templateDetails">
	            <div class="col-xs-5">
	                <p>Template Selected</p>
	                <h4>{{selectedTemplate.name}}</h4>
	                <img src="{{selectedTemplate.previewUrl}}" class="img-thumbnail margin-bottom-10">
	            </div>
	            <div class="col-xs-7">
	                <div class="form-group" ng-class="{ 'has-error': titleError}">
	                    <label for="new-post-title" tooltip-placement="bottom" tooltip="Provide the title of the post you want to create">Page Title</label>
	                    <input id="new-post-title" class="form-control input-lg" type="text" ng-model="createpost.title" ng-change="validatecreatepost(createpost)">
	                </div>
	                <div class="form-group" ng-class="{ 'has-error': handleError}" ng-show="showChangeURL">
	                    <slug from="createpost.title" to="createpost.handle"></slug>
	                    <label for="new-post-url" class="tooltips" tooltip-placement="bottom" tooltip="Modify the url where your post will be reached">Page Url</label>
	                    <input id="new-post-url" class="form-control" type="text" ng-model="createpost.handle" ng-change="validatecreatepost(createpost)">
	                </div>
	                <p ng-show="createpost.title">Page Url will be
	                    <strong>/{{createpost.title | slugify}}</strong>
	                    <span class="links cl-effect-1">
									<a href="" ng-click="showChangeURL = true" ng-show="!showChangeURL">Modify</a>
								</span>
	                    <span class="links cl-effect-1">
		                        	<a href="" ng-click="showChangeURL = false" ng-show="showChangeURL">Cancel</a>
		                        </span>
	                </p>
	                <div class="clearfix mb15"></div>
	                <div class="form-group">
	                    <div class="checkbox clip-check check-info checkbox-inline">
	                        <input type="checkbox" id="checkbox10" ng-model="createpost.mainmenu" checked>
	                        <label for="checkbox10">
	                            Add to Main Menu?
	                        </label>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	    <div class="clearfix"></div>
	    <div class="modal-footer" ng-show="templateDetails">
	        <button class="btn btn-primary" ng-click="createpostFromTemplate(createpost, $event)">Add Post</button>
	    </div>
    </script>
    <!-- end:  NEW PAGE MODAL -->
</div>
