<div ng-controller="messagesCtrl as vm" >
    <section id="page-title" class="padding-top-15 padding-bottom-15">
        <div class="row">
            <div class="col-sm-8">
                <h1 class="mainTitle">Broadcast Messages</h1>
                <span ng-if="vm.state.messages" class="mainDescription">There are currently {{vm.state.messages.length}} messages.</span>
            </div>
        </div>
    </section>
    <div>
        <div class="container-fluid container-fullw bg-white padding-top-10 padding-bottom-10" ng-if="!vm.uiState.loading">
            <div class="form-group margin-bottom-0 pull-right">
                <button ng-disabled="vm.uiState.saveLoading" type="button" class="btn btn-warning btn-wide btn-scroll btn-scroll-top ti ti-plus" ng-click="vm.editMessage()">
                    <span>Add New Message</span>
                </button>
            </div>
        </div>    
    </div>
    <div class="padding-top-20">
        <div class="panel-body panel-white space20 ">
            <div ng-if="(!vm.state.messages || vm.state.messages.length <= 0 )&& !vm.uiState.loading">                
                <h4 class="text-center margin-top-30 margin-bottom-30">No Messages</h4>                
            </div>            
            <div ng-if="vm.uiState.loading">                
                <h4 class="text-center margin-top-30 margin-bottom-30">Loading Messages, Please wait....</h4>                
            </div>
            <ul class="list-unstyled broadcast-message-container-list">
                <li ng-repeat="message in vm.state.messages | orderBy:'-modified.date'">
                    <h3 ng-bind-html="message.subject | unsafe"></h3>
                    <p ng-text-truncate="vm.stripHTML(message.message)" ng-tt-chars-threshold="100" ng-tt-no-toggling></p>

                    <div class="btn-group btn-group-sm" role="group" aria-label="Post Status">
                        <button
                            type="button"
                            class="btn btn-primary"
                            tooltip-placement="top"
                            ng-disabled="vm.uiState.saveLoading"
                            tooltip-append-to-body="true"
                            tooltip="Edit Message" ng-click="vm.editMessage(message._id)">
                            <i class="fa fa-pencil"></i>  
                        </button>

                        <button
                            type="button"
                            class="btn btn-primary"
                            tooltip-placement="top"
                            ng-disabled="vm.uiState.saveLoading"
                            tooltip-append-to-body="true"
                            tooltip="Delete Message"
                            ng-click="vm.deleteMessage(message)">

                            <i class="fa fa-trash"></i>

                        </button>

                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>