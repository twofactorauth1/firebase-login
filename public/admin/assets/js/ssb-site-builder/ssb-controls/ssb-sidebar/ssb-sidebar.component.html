<div class="ssb-sidebar-inner" ng-class="vm.uiState.navigation.indexClass">

    <div class="ssb-sidebar-icons tabbable tabs-left margin-bottom-0 ng-isolate-scope">
        <ul class="nav nav-tabs">

            <li class="nav-tab" ng-class="{ 'nav-tab-is-active': vm.uiState.openSidebarPanel === 'add' }">
                <div ng-click="vm.uiState.openSidebarPanel = 'add'"><div class="ti-plus display-ib"></div>Add</div>
            </li>

            <li class="nav-tab" ng-class="{ 'nav-tab-is-active': vm.uiState.openSidebarPanel === 'pages' }">
                <div ng-click="vm.uiState.openSidebarPanel = 'pages'"><div class="ti-files display-ib"></div>Pages</div>
            </li>

            <li class="nav-tab" ng-class="{ 'nav-tab-is-active': vm.uiState.openSidebarPanel === 'content' }">
                <div ng-click="vm.uiState.openSidebarPanel = 'content'"><div class="ti-pencil-alt display-ib"></div>Content</div>
            </li>

            <li class="nav-tab" ng-class="{ 'nav-tab-is-active': vm.uiState.openSidebarPanel === 'design' }">
                <div ng-click="vm.uiState.openSidebarPanel = 'design'"><div class="ti-brush display-ib"></div>Design</div>
            </li>

        </ul>
    </div>


    <div ng-if="vm.uiState.openSidebarPanel === 'add'" class="site-editor-group site-editor-group-add editor-group tab-content">
        <div class="tab-pane" ng-class="{ 'active': vm.uiState.openSidebarPanel === 'add' }">
            <section>

                <h4 class="ssb-sidebar-sub-heading">
                    Add Content
                </h4>

                <div class="close-panel ti-close"  ng-click="vm.uiState.openSidebarPanel = ''"></div>

                <!-- <h4 class="row">
                    <div class="col-xs-10 col-sm-4">
                        Add new page section
                    </div>

                    <div class="col-xs-12 col-sm-7">
                        <button
                            class="ssb-add-section-sort-btn btn pull-right margin-right-20"
                            ng-class="{ 'btn-primary disabled': vm.sectionType === 'enabledUserSections', 'btn-off': vm.sectionType !== 'enabledUserSections' }"
                            ng-click="vm.setSectionType('enabledUserSections')">
                            Browse Saved
                        </button>

                        <button
                            class="ssb-add-section-sort-btn btn pull-right margin-right-20"
                            ng-class="{ 'btn-primary disabled': vm.sectionType === 'enabledPlatformSections', 'btn-off': vm.sectionType !== 'enabledPlatformSections' }"
                            ng-click="vm.setSectionType('enabledPlatformSections')">
                            Browse Platform
                        </button>
                    </div>
                </h4> -->

                <div>
                    <tabset class="tabbable tabs-left margin-bottom-0" ng-class="{'email-sections' : isEmail}">
                        <tab ng-repeat="sectionFilter in vm.sectionFilters">
                            <tab-heading>
                                {{sectionFilter.capitalized}}
                            </tab-heading>

                            <!-- <div ng-repeat="section in vm.sections | orderBy:'title' | filter:{ featured: true, enabled: true }" ng-if="sectionFilter.lowercase === 'featured'" class="ssb-sidebar-add-section margin-bottom-15"> -->

                            <div ng-repeat="section in vm.sections | orderBy:'title' | filter:{ filter: sectionFilter.lowercase, enabled: true }" ng-if="sectionFilter.lowercase != 'all' && sectionFilter.lowercase != 'featured'" class="ssb-sidebar-add-section margin-bottom-15" ng-click="vm.addSectionToPage(section);vm.uiState.openSidebarPanel = '';">
                                <div class="ssb-sidebar-add-section-img">
                                    <div class="img-wrap">
                                        <a href>
                                            <span style="  background: url('{{section.preview}}');background-size: cover;height: 115px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
                                        </a>
                                    </div>
                                    <i
                                        class="fa fa-info"
                                        tooltip-placement="left"
                                        tooltip-html-unsafe="<h4>{{section.title}}</h4><p>{{section.description}}</p>">
                                    </i>
                                </div>
                                <div class="ssb-sidebar-add-section-btn">
                                    <button type="button" class="btn btn-primary btn-wide btn-scroll btn-scroll-top ti-plus pull-right">
                                        <span>Add {{section.title}}</span>
                                    </button>
                                </div>
                                <div class="clearfix"></div>
                            </div>

                            <div ng-repeat="section in vm.sections | orderBy:'title' | filter:{ enabled: true }" ng-if="sectionFilter.lowercase == 'all'" class="ssb-sidebar-add-section margin-bottom-15" ng-click="vm.addSectionToPage(section);vm.uiState.openSidebarPanel = '';">
                                <div class="ssb-sidebar-add-section-img">
                                    <div class="img-wrap">
                                        <a href>
                                            <span style="  background: url('{{section.preview}}');background-size: cover;height: 115px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
                                        </a>
                                    </div>
                                    <i
                                        class="fa fa-info"
                                        tooltip-placement="left"
                                        tooltip-html-unsafe="<h4>{{section.title}}</h4><p>{{section.description}}</p>">
                                    </i>
                                </div>
                                <div class="ssb-sidebar-add-section-btn">
                                    <button type="button" class="btn btn-primary btn-wide btn-scroll btn-scroll-top ti-plus pull-right">
                                        <span>Add {{section.title}}</span>
                                    </button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </tab>
                    </tabset>
                </div>

                <!-- <h4 class="row modal-title">
                    <div class="col-xs-10 col-sm-4">
                        Re-use a section from another page
                    </div>
                </h4>

                <div>
                    <tabset class="tabbable tabs-left margin-bottom-0" ng-class="{'email-sections' : isEmail}">
                        <tab ng-repeat="sectionFilter in vm.sectionFilters">
                            <tab-heading>
                                {{sectionFilter.capitalized}}
                            </tab-heading>

                            <div ng-repeat="section in vm.enabledUserSections | orderBy:'title' | filter:{ enabled: true }" ng-if="vm.enabledUserSections.length" class="margin-bottom-15">
                                <div class="col-xs-4">
                                    <div class="img-wrap">
                                        <a ng-href="{{section.preview}}" title="" data-gallery="">
                                            <span style="  background: url('{{section.preview}}');background-size: cover;height: 115px;background-position: center;border-radius: 5px;border: 1px solid #e7e7e7;display: block;"></span>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-xs-8">
                                    <h4>{{section.title}}</h4>
                                    <p>{{section.description}}</p>
                                    <button type="button" class="btn btn-primary btn-wide btn-scroll btn-scroll-top ti-plus pull-right" ng-click="vm.addSectionToPage(section);">
                                        <span>Add section</span>
                                    </button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </tab>
                    </tabset>
                </div> -->


            </section>
        </div>
    </div>

    <div ng-if="vm.uiState.openSidebarPanel === 'pages'" class="site-editor-group site-editor-group-pages editor-group tab-content">
        <div class="tab-pane" ng-class="{ 'active': vm.uiState.openSidebarPanel === 'pages' }">

            <section>


                <h4 class="ssb-sidebar-sub-heading">
                    Current Page
                </h4>

                <ul class="list-unstyled ssb-settings-list">
                    <li>
                        <label>
                            Title:
                            <span editable-text="vm.state.page.title" onbeforesave="">{{vm.state.page.title}}</span>
                        </label>
                    </li>
                    <li>
                        <label>
                            URL:
                            <span editable-text="vm.state.page.handle" onbeforesave="">{{vm.state.page.handle}}</span>
                        </label>
                    </li>
                    <!-- <li>
                        <label>
                            Page Template:
                            {{vm.getTemplateById(vm.state.page.templateId)}}
                            <span>{{vm.getTemplateById(vm.state.page.templateId)[0].name}}</span>
                        </label>
                    </li> -->
                </ul>

                <h4 class="ssb-sidebar-sub-heading">
                    <span>All Pages ({{vm.getNumberOfPages(vm.state.pages)}})</span>
                </h4>

                <div class="close-panel ti-close"  ng-click="vm.uiState.openSidebarPanel = ''"></div>

                <button ng-click="vm.openModal('ssb-new-page-modal', null, null, null);" class="btn btn-primary">Add Page</button>

                <ul class="list-unstyled">
                    <li ng-repeat="page in vm.state.pages track by $index" class="ssb-page-section-settings-item">
                        <div ng-click="vm.openPageSettingsModal('ssb-page-settings-modal', 'SiteBuilderPageSettingsModalController', null, 'lg', page._id);" class="ssb-sidebar-item-icon ti-settings display-ib" tooltip-placement="left" tooltip-html-unsafe="Page Settings"></div>
                        <div class="panel-group">
                            <div class="ssb-sidebar-sortable-item panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a href page-id="page._id" ng-click="vm.uiState.navigation.loadPage(page._id)">{{page.title}}</a>
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>

        </div>
    </div>

    <div ng-if="vm.uiState.openSidebarPanel === 'content'" class="site-editor-group site-editor-group-content editor-group tab-content">
        <div class="tab-pane" ng-class="{ 'active': vm.uiState.openSidebarPanel === 'content' }">

            <section>
                <h4 class="ssb-sidebar-sub-heading">
                    <span>Page Sections ({{vm.state.page.sections.length || 0}})</span>
                    <!-- <div ng-click="vm.uiState.openSidebarPanel = 'add'" class="ssb-sidebar-item-icon ti-plus display-ib" tooltip-placement="left" tooltip-html-unsafe="Add Section"></div> -->
                </h4>

                <div class="close-panel ti-close"  ng-click="vm.uiState.openSidebarPanel = ''"></div>

                <button ng-click="vm.uiState.openSidebarPanel = 'add'" class="btn btn-primary">Add Section</button>

                <ul ng-if="vm.state.page.sections" class="list-unstyled" ng-sortable="vm.sortableOptions" ng-model="vm.state.page.sections">
                    <li ng-repeat="section in vm.state.page.sections track by $index" class="ssb-page-section-settings-item ssb-sidebar-move-handle">
                        <div class="ssb-sidebar-item-icon ti-move display-ib"></div>
                        <div
                            ng-hide="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit"
                            class="ssb-sidebar-item-icon ssb-sidebar-item-icon-offset-1 ti-close display-ib"
                            ng-if="vm.uiState.activeSectionIndex === $index" ng-click="vm.removeSectionFromPage(vm.uiState.activeSectionIndex)"
                            tooltip-placement="left"
                            tooltip-html-unsafe="Remove section">
                        </div>
                        <div
                            ng-hide="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit"
                            class="ssb-sidebar-item-icon ssb-sidebar-item-icon-offset-2 ti-pencil display-ib"
                            ng-if="vm.uiState.activeSectionIndex === $index"
                            ng-click="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit = true; vm.editSectionName('editable_{{section._id}}')"
                            tooltip-placement="left"
                            tooltip-html-unsafe="Rename section">
                        </div>
                        <div
                            ng-hide="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit"
                            class="ssb-sidebar-item-icon ssb-sidebar-item-icon-offset-3 display-ib ti-eye"
                            ng-if="vm.uiState.activeSectionIndex === $index"
                            ng-click="vm.hideSectionFromPage(section, vm.uiState.activeSectionIndex)"
                            tooltip-placement="left"
                            tooltip-html-unsafe="Show/hide section">
                        </div>

                        <div class="accordion panel-group">
                            <div class="ssb-sidebar-sortable-item panel panel-default" ng-click="vm.setActiveSection($index)" ng-class="{ 'ssb-sidebar-section-open': vm.uiState.activeSectionIndex === $index }">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a href="javascript:void(0)" class="accordion-toggle">
                                        <span ng-class="{ 'hidden-faded': !section.visibility }" ng-if="!vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit">{{section.name}}</span>
                                        <span onhide="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit=false" id="editable_{{section._id}}" ng-if="vm.uiState.accordion.sections[vm.uiState.activeSectionIndex].isEdit" editable-text="section.name">{{section.name}}</span>
                                        </a>
                                    </h4>
                                </div>
                            </div>
                        </div>

                    </li>
                </ul>
            </section>

        </div>
    </div>

    <div ng-if="vm.uiState.openSidebarPanel === 'design'" class="site-editor-group site-editor-group-design editor-group tab-content">
        <div class="tab-pane" ng-class="{ 'active': vm.uiState.openSidebarPanel === 'design' }">

            <section class="container-fluid">
                <h4 class="ssb-sidebar-sub-heading">Theme Settings</h4>

                <div class="close-panel ti-close"  ng-click="vm.uiState.openSidebarPanel = ''"></div>
                    <div class="form-group">

                        <ui-select ng-model="vm.state.website.theme" ng-change="vm.applyThemeToSite($select.selected)" theme="bootstrap">
                          <ui-select-match placeholder="Select a theme">
                              <small ng-bind-html="$select.selected.name"></small>
                          </ui-select-match>
                          <ui-select-choices repeat="theme in vm.state.themes | filter: $select.search track by $index">
                              <small ng-bind-html="theme.name | highlight: $select.search"></small>
                          </ui-select-choices>
                        </ui-select>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.bodyBackgroundColor"></spectrum-colorpicker>
                                <label for="colorpicker">Body Background Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default body/page background color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>

                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.headerBackgroundColor"></spectrum-colorpicker>
                                <label for="colorpicker">Header Background Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default header background color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.headerTextColor"></spectrum-colorpicker>
                                <label for="colorpicker">Header Text Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default header text color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>

                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.headerSize"></spectrum-colorpicker>
                                <label for="colorpicker">Header Text Size <span tooltip-placement="top" tooltip-html-unsafe="Override the default header text size for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.heroTextColor"></spectrum-colorpicker>
                                <label for="colorpicker">Hero Text Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default hero text color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>

                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.heroSize"></spectrum-colorpicker>
                                <label for="colorpicker">Hero Text Size <span tooltip-placement="top" tooltip-html-unsafe="Override the default hero text size for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.heroBackgroundColor"></spectrum-colorpicker>
                                <label for="colorpicker">Hero Background Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default hero background color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.primaryTextColor"></spectrum-colorpicker>
                                <label for="colorpicker">Text Color (Primary) <span tooltip-placement="top" tooltip-html-unsafe="Override the default text color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>

                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.primaryBtnTextColor"></spectrum-colorpicker>
                                <label for="colorpicker">Text Color (Buttons) <span tooltip-placement="top" tooltip-html-unsafe="Override the default button text color color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            <div class="form-group col-xs-6 ssb-spectrum-color-picker">
                                <spectrum-colorpicker class="ssb-spectrum-color-picker-text" format="'hex'" options="vm.spectrum.options" ng-model="vm.state.website.themeOverrides.styles.primaryBtnBackgroundColor"></spectrum-colorpicker>
                                <label for="colorpicker">Button Background Color <span tooltip-placement="top" tooltip-html-unsafe="Override the default button background color for your website."><i class="fa fa-info-circle" /></span></label>
                            </div>
                        </div>

                        <div class="row padding-10">
                            Heading Size: <input type="number" string-to-number="" ng-model="vm.state.website.themeOverrides.styles.headingSize" min="12" max="500" data-verticalbuttons="true" data-verticalupclass="ti-angle-up" data-verticaldownclass="ti-angle-down"> (px)
                        </div>
                        <div class="row padding-10">
                            Paragraph Size: <input type="number" string-to-number="" ng-model="vm.state.website.themeOverrides.styles.paragraphSize" min="8" max="100" data-verticalbuttons="true" data-verticalupclass="ti-angle-up" data-verticaldownclass="ti-angle-down"> (px)
                        </div>
                        <div class="row padding-10">
                            Font Stack (Default):
                            <div ng-attr-style="background-color: {{vm.state.website.themeOverrides.styles.bodyBackgroundColor}}; font-family: {{vm.state.website.themeOverrides.defaultFontStack}};">
                                {{vm.state.website.themeOverrides.defaultFontStack}}
                            </div>
                        </div>
                        <div class="row padding-10">
                            Font Stack (Heading):
                            <div ng-attr-style="background-color: {{vm.state.website.themeOverrides.styles.bodyBackgroundColor}}; font-family: {{vm.state.website.themeOverrides.defaultFontStack}};">
                                {{vm.state.website.themeOverrides.headingFontStack}}
                            </div>
                        </div>
                        <div class="row padding-10">
                            Font Stack (Paragraph):
                            <div ng-attr-style="background-color: {{vm.state.website.themeOverrides.styles.bodyBackgroundColor}}; font-family: {{vm.state.website.themeOverrides.defaultFontStack}};">
                                {{vm.state.website.themeOverrides.paragraphFontStack}}
                            </div>
                        </div>


                    </div>
            </section>

        </div>
    </div>

    <div data-ng-include data-src=" 'assets/js/ssb-site-builder/ssb-controls/ssb-sidebar/templates/ssb-sidebar-section-panel.component.html' "></div>


	    <!-- <section ng-repeat="linkList in vm.state.website.linkLists track by $index">
	        <h4 class="ssb-sidebar-sub-heading">{{::linkList.name}}</h4>
	        <ul class="list-unstyled" ng-sortable="vm.sortableOptions" ng-model="linkList.links">
	        	<li ng-repeat="link in linkList.links track by $index" class="ssb-page-section-settings-item">
	        		<div class="ssb-sidebar-item-icon ssb-sidebar-move-handle ti-move display-ib"></div>
	        		<div class="ssb-sidebar-item-icon ssb-sidebar-item-icon-offset-1 ti-close display-ib" tooltip-placement="left" tooltip-html-unsafe="Remove from {{::linkList.name}}"></div>
	        		<div class="panel-group">
		        		<div class="ssb-sidebar-sortable-item panel panel-default">
			        		<div class="panel-heading">
				        		<h4 class="panel-title">
				        			<a href page-id="page._id" ng-click="vm.uiState.navigation.loadPage(page._id)">{{link.label}}</a>
				        		</h4>
				        	</div>
			        	</div>
			        </div>
	        	</li>
	        </ul>
	    </section> -->

	<!-- </div>

	<div class="page-editor-group editor-group"> -->

		<!-- <div class="ssb-sidebar-heading">
			<div class="ti-arrow-left" ng-click="vm.uiState.navigation.back()"></div>
			<h4>{{vm.state.page.title}}</h4>
		</div> -->





	<!-- </div> -->

</div>
