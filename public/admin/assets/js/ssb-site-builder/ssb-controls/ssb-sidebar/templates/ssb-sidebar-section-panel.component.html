<section
    ng-if="vm.uiState.showSectionPanel && vm.state.page.sections[vm.uiState.activeSectionIndex]"
    class="ssb-sidebar-section-panel draggable"
    ind-draggable>

    <h4 class="ssb-sidebar-sub-heading">
        <span ng-if="vm.uiState.openSidebarSectionPanel.name === ''">{{vm.state.page.sections[vm.uiState.activeSectionIndex].name}}</span>
        <div
            ng-if="vm.uiState.openSidebarSectionPanel.name !== ''">

            <i class="ti-arrow-left" ng-click="vm.uiState.navigation.sectionPanel.back();"></i>
            {{vm.uiState.openSidebarSectionPanel.name | cleanType}}

            <!-- {{vm.uiState.openSidebarSectionPanel}} -->

        </div>
    </h4>

    <div class="close-panel ti-close" ng-click="vm.uiState.showSectionPanel = false;vm.uiState.openSidebarSectionPanel = { name: '', id: '' };"></div>

    <!-- Section Settings Home -->
    <ssb-sidebar-settings-panel
        ng-if="!vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/ssb-page-section/sidebar.settings.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Section Settings Design -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'design' === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/ssb-page-section/sidebar.settings.design.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Section Settings Layout -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'layout' === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/ssb-page-section/sidebar.settings.layout.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Component Settings Home -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="vm.uiState.activeComponentIndex !== undefined && vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id !== undefined && vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/#COMPONENTTYPE#/sidebar.settings.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Component Settings Design -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'design' + vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/shared/sidebar.settings.design.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Component Settings Layout -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'layout' + vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/shared/sidebar.settings.layout.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Component Settings Advanced -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'advanced' + vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/shared/sidebar.settings.advanced.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>

    <!-- Component Settings Specific :: {{'navigation' + vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id}}::{{vm.uiState.openSidebarSectionPanel.id}} -->
    <ssb-sidebar-settings-panel
        class="ssb-sidebar-section-panel-component-panel container-fluid"
        ng-if="'navigation' + vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]._id === vm.uiState.openSidebarSectionPanel.id"
        settings-template="assets/js/ssb-site-builder/ssb-components/shared/navigation.html"
        component="vm.state.page.sections[vm.uiState.activeSectionIndex].components[vm.uiState.activeComponentIndex]"
        state="vm.state"
        ui-state="vm.uiState">
    </ssb-sidebar-settings-panel>


</section>
