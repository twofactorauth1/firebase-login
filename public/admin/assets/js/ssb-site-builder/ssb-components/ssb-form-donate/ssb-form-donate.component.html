<div class="form-donate-{{vm.component._id}} form-donate-component">

    <div class="col-xs-12 component-body" ng-class="{'default-font-size': vm.component.formSettings.formTextSize}" style="{{vm.formStyle(vm.component.formSettings)}}">

        <div class="inner-page">
            <div data-edit class="row">
                <div class="form-title ssb-theme-heading-text">
                    <div elem ng-model="vm.component.maintitle"></div>
                </div>
                <div class="form-subtitle">
                    <div elem ng-model="vm.component.subtitle"></div>
                </div>
                <div class="clearfix mb15"></div>

                <div class="form-donate-layout">
                    <div class="form-layout-custom input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                        <div class="clearfix mb15 visible-xs"></div>
                        <div class="col-sm-12">
                            <button ng-if="!vm.isEditing" style="{{vm.buttonStyle(vm.component.btn)}}" ng-class="{'ssb-theme-btn': vm.component.submitBtn}" data-toggle="modal" data-target="#form-donate-modal-{{vm.component._id}}" ng-style="{'background': component.btn.bgcolor, 'color':component.btn.color, 'border-color': component.btn.bgcolor}"
                                class="btn btn-form btn-default pull-right btn-block">
                                <span elem ng-model="vm.component.submitBtn"></span>
                            </button>
                            <div ng-if="vm.isEditing" style="{{vm.buttonStyle(vm.component.btn)}}" ng-class="{'ssb-theme-btn': vm.component.submitBtn}" ng-style="{'background': component.btn.bgcolor, 'color':component.btn.color, 'border-color': component.btn.bgcolor}" class="btn btn-form btn-default pull-right btn-block inline-block">
                                <span elem ng-model="vm.component.submitBtn"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="form-donate-modal-{{vm.component._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">My Donation</h4>
                            </div>
                            <div class="modal-body">
                                <div class='row billing-shipping' ng-show="vm.checkoutModalState == 1">
                                    <div class='row'>
                                        <div class='col-sm-8'>
                                            <strong>{{vm.product.name}}</strong>
                                        </div>
                                        <div class='col-sm-4'>
                                            <div class='form-group col-sm-12'>
                                                <div class='col-sm-4'>
                                                    <label class="control-label">Amount</label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <input type='text' class='form-control' ng-model='vm.formBuilder.amount' />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row'>
                                        <p>{{vm.product.description}}</p>
                                    </div>
                                    <hr/>
                                    <form name="formBuilder" ng-submit="vm.createUser(formBuilder)">
                                        <div class="form-donate-layout" ng-switch="vm.component.layout">
                                            <div ng-switch-when="1" class="form-layout-1 input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                                                <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group col-sm-12" ng-if="val.visible" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                    <label class="control-label">{{val.label || val.type}}</label>
                                                    <input ng-if="val.name !== 'message'" type="text" class="form-control" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)">
                                                    <textarea ng-if="val.name === 'message'" class="form-control input-lg" name="message" rows="5" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)"></textarea>
                                                </div>
                                            </div>
                                            <div ng-switch-when="2" class="form-layout-2 input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                                                <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group col-sm-12" ng-if="val.visible" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                    <label class="col-sm-2 control-label">{{val.label || val.type}}</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" ng-if="val.name !== 'message'" class="form-control" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)">
                                                        <textarea ng-if="val.name === 'message'" class="form-control input-lg" name="message" rows="5" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div ng-switch-when="3" class="form-layout-3 col-sm-12 input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                                                <div class="col-sm-6">
                                                    <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group" ng-if="val.visible && val.name !== 'message'" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                        <input placeholder="{{val.label || val.type}}" type="text" class="form-control" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)">
                                                    </div>
                                                </div>

                                                <div class="col-sm-6">
                                                    <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group" ng-if="val.visible && val.name === 'message'" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                        <textarea placeholder="{{val.label || val.type}}" class="form-control input-lg" name="message" rows="5" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div ng-switch-when="4" class="form-layout-4 input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                                                <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group col-sm-12" ng-if="val.visible" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                    <input ng-if="val.name !== 'message'" placeholder="{{val.label || val.type}}" type="text" class="form-control" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)">
                                                    <textarea ng-if="val.name === 'message'" placeholder="{{val.label || val.type}}" class="form-control input-lg" name="message" rows="5" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional'
                                                        ng-pattern="vm.addPattern(val)"></textarea>
                                                </div>
                                            </div>
                                            <div ng-switch-default class="form-layout-custom input-fields {{vm.nthRow}}" style="{{vm.inputContainerStyle(vm.component.formSettings)}}">
                                                <div style="{{vm.fieldStyle(vm.component.formSettings)}}" class="form-group {{vm.fieldClass()}}" ng-if="val.visible" ng-repeat="val in vm.component.contactInfo" ng-class="{ 'has-error' : (formBuilder.{{val.name}}.$invalid || formBuilder.{{val.name}}.$error.$required) && !formBuilder.{{val.name}}.$pristine }">
                                                    <input ng-if="val.name !== 'message'" type="text" class="form-control" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)" placeholder="{{val.label || val.type}}">
                                                    <textarea ng-if="val.name === 'message'" class="form-control input-lg" name="message" rows="5" ng-model="vm.formBuilder[val.name]" style="{{vm.inputStyle(vm.component.formSettings)}}" name="{{val.name}}" ng-required='!val.optional' ng-pattern="vm.addPattern(val)"
                                                        placeholder="{{val.label || val.type}}"></textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="clearfix mb15"></div>
                                        <div ng-show="vm.formSuccess">
                                            <div class="row thank-you animated" ng-class="{fadeOut: !vm.formSuccess, tada: vm.formSuccess}">
                                                <h3 class="center mb20" ng-bind-html="vm.component.formSettings.successMessage || 'Thank You for Submitting!'"></h3>
                                            </div>
                                        </div>
                                        <div ng-show="vm.formError">
                                            <div class="row thank-you animated" ng-class="{fadeOut: !vm.formError, tada: vm.formError}">
                                                <h3 class="center mb20" ng-bind-html="vm.component.formSettings.errorMessage || 'Error while Submitting!'"></h3>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="row thank-you" style="height:400px" ng-show="vm.checkoutModalState == 2">
                                    <h3 class="center mb20">Payment Choice</h3>
                                    <div class="alert alert-danger" ng-show='vm.showPaypalErrorMsg'>Try again with paypal or use Credit Card?</div>
                                    <div ng-show='vm.paypalInfo' ng-class='{"col-sm-6": vm.stripeInfo, "col-sm-12": !vm.stripeInfo}'>
                                        <div class="panel animated no-radius text-center margin-bottom-0 cursor-pointer" ng-class="{true:'panel-light-grey pulse',false:'panel-white'}">
                                            <div class="panel-body" ng-class="{'bg-light-grey': hover1}" ng-mouseenter="hover1 = true" ng-mouseleave="hover1 = false" ng-click="vm.showPaypalLoading || vm.paypalPayment()" ng-disabled='vm.showPaypalLoading'>
                                                <span class="fa-stack fa-2x"> <i class="fa fa-square fa-stack-2x text-primary"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span>
                                                <h3 class="StepTitle margin-top-10">Paypal</h3>
                                                <p class="text-small">
                                                    Checkout with Paypal
                                                    <img src='/images/paypal-loading.gif' ng-show='vm.showPaypalLoading' />
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-show='vm.stripeInfo' ng-class='{"col-sm-6": vm.paypalInfo, "col-sm-12": !vm.paypalInfo}'>
                                        <div class="panel animated no-radius text-center margin-bottom-0 cursor-pointer" ng-class="{true:'panel-light-grey pulse',false:'panel-white'}">
                                            <div class="panel-body" ng-class="{'bg-light-grey': hover1}" ng-mouseenter="hover1 = true" ng-mouseleave="hover1 = false" ng-click="vm.setCheckoutState(4)">
                                                <span class="fa-stack fa-2x"> <i class="fa fa-square fa-stack-2x text-primary"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span>
                                                <h3 class="StepTitle margin-top-10">Credit Card</h3>
                                                <p class="text-small">
                                                    Checkout with a Credit Card (Powered by Stripe)
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix" style="margin-bottom:30px"></div>
                                </div>

                                <div class="row thank-you" style="height:400px" ng-if="vm.checkoutModalState == 3">
                                    <h3 class="center mb20">Paypal Payment</h3>
                                    <form action="{{vm.paypalURL}}" target="_self" class="standard">
                                        <label for="buy">Buy Now:</label>
                                        <input type="image" id="submitBtn" value="Pay with PayPal" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif" ng-click='vm.paypalLoginClickFn()'>
                                        <input id="type" type="hidden" name="expType" value="light">
                                        <input id="paykey" type="hidden" name="paykey" value="{{vm.paypalKey}}">
                                    </form>
                                </div>

                                <div class="row payment" ng-show="vm.checkoutModalState == 4">
                                    <div class="col-sm-12 col-xs-12 information">
                                        <div class="clearfix margin-bottom-30"></div>
                                        <div class="card-wrapper"></div>
                                        <div class="clearfix margin-bottom-30"></div>
                                        <div class="active col-xs-12">
                                            <form id="product-card-details" name="product-card-details" action="">
                                                <div class="row">
                                                    <div id="card_number" class="form-group small-6 columns col-sm-6 has-feedback">
                                                        <input placeholder="Card number" ng-blur="checkCardNumber()" type="text" name="number" id="number" class="form-control">
                                                        <span class="glyphicon form-control-feedback"></span>
                                                        <span class="error help-block" />
                                                    </div>
                                                    <div class="visible-xs mb20"></div>
                                                    <div id="card_name" class="form-group small-6 columns col-sm-6 has-feedback">
                                                        <input placeholder="Full name" type="text" id="name" name="name" class="form-control" ng-blur="checkCardName()">
                                                        <span class="glyphicon form-control-feedback"></span>
                                                        <span class="error help-block" />
                                                    </div>
                                                </div>
                                                <div class="clearfix mb20"></div>
                                                <div class="row">
                                                    <div id="card_expiry" class="form-group small-3 columns col-xs-6 has-feedback">
                                                        <input placeholder="MM/YY" ng-blur="checkCardExpiry()" type="text" id="expiry" name="expiry" class="form-control">
                                                        <span class="glyphicon form-control-feedback"></span>
                                                        <span class="error help-block" />
                                                    </div>
                                                    <div id="card_cvc" class="form-group small-3 columns col-xs-6 has-feedback">
                                                        <input placeholder="CVC" ng-blur="checkCardCvv()" type="text" id="cvc" name="cvc" class="form-control">
                                                        <span class="glyphicon form-control-feedback"></span>
                                                        <span class="error help-block" />
                                                    </div>
                                                </div>
                                                <div class="clearfix mb20"></div>
                                                <h4 ng-if="failedOrderMessage.length" class="center" style="color: #a94442;">{{failedOrderMessage}}</h4>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="row thank-you" style="height:400px" ng-if="vm.checkoutModalState == 5">
                                    <h3 class="center mb20">Thank you for your donation.</h3>
                                    <div class="clearfix" style="margin-bottom:30px"></div>
                                    <div class="col-xs-12 text-center">
                                        <span class="fa fa-check-circle fa-5x text-green"></span>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">{{vm.component.modalSettings.closeBtnText}}</button>
                                <button type="button" class="btn btn-primary" ng-disabled="formBuilder.$invalid">{{vm.component.modalSettings.submitBtnText}}</button>
                            </div> -->
                            <div class="modal-footer billing-footer" ng-show="vm.checkoutModalState == 1">
                                <button class="btn ssb-theme-btn btn-success btn-payment pull-right" ng-click="vm.setCheckoutState(2)"> Next <i class="fa fa-chevron-right"></i></button>
                            </div>
                            <div class="modal-footer billing-footer" ng-show="vm.checkoutModalState == 2">
                                <button class="btn ssb-theme-btn pull-left btn-info back-to-shopping-cart" ng-click="vm.setCheckoutState(1)"><i class="fa fa-chevron-left"></i> Back</button>
                            </div>
                            <div class="modal-footer billing-footer" ng-show="vm.checkoutModalState == 3">
                                <button class="btn btn-danger pull-right" ng-click="vm.deleteOrderFn(order)"><i class="fa fa-trash"></i> Cancel</button>
                            </div>
                            <div class="modal-footer cart-footer" ng-show="vm.checkoutModalState == 4">
                                <button class="btn ssb-theme-btn btn-info continue-shopping pull-left" ng-click="vmsetCheckoutState(2)"><i class="fa fa-chevron-left"></i> Back
                                </button>
                                <button class="btn ssb-theme-btn btn-orange btn-checkout pull-right" ng-click="vm.makeCartPayment()"><i class="fa fa-shopping-cart"></i> Checkout</button>
                            </div>
                            <div class="modal-footer cart-footer" ng-show="vm.checkoutModalState == 5">
                                <button type="button" class="btn ssb-theme-btn pull-right" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

    </div>
    <style>
        .form-donate- {
            {
                vm.component._id
            }
        }

        .form-donate-title {
            color: {
                {
                    vm.component.txtcolor || 'white'
                }
            }
            ;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .component-body.default-font-size * {
            font-size: {
                {
                    vm.component.formSettings.formTextSize
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row2 div:nth-child(2n) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row2 div:nth-child(2n+1) {
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row3 div:nth-child(3n) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row3 div:nth-child(3n+1) {
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row3 div:not(:nth-child(3n)),
        .input-fields.nth-row3 div:not(:nth-child(3n+1)) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row4 div:nth-child(4n) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row4 div:nth-child(4n+1) {
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row4 div:not(:nth-child(4n)),
        .input-fields.nth-row4 div:not(:nth-child(4n+1)) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row5 div:nth-child(5n) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row5 div:nth-child(5n+1) {
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .input-fields.nth-row5 div:not(:nth-child(5n)),
        .input-fields.nth-row5 div:not(:nth-child(5n+1)) {
            padding-left: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
            padding-right: {
                {
                    vm.component.formSettings.spacing.pr/2
                }
            }
            px !important;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        .btn-simple-form:hover,
        .btn-simple-form:active,
        .btn-simple-form:active:focus,
        .btn-simple-form:active:hover {
            color: {
                {
                    vm.component.btn.color
                }
            }
            !important
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        ::-webkit-input-placeholder {
            color: {
                {
                    vm.component.formSettings.inputTextColor
                }
            }
            ;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        :-moz-placeholder {
            color: {
                {
                    vm.component.formSettings.inputTextColor
                }
            }
            ;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        ::-moz-placeholder {
            color: {
                {
                    vm.component.formSettings.inputTextColor
                }
            }
            ;
        }

        .form-donate- {
            {
                vm.component._id
            }
        }

        :-ms-input-placeholder {
            color: {
                {
                    vm.component.formSettings.inputTextColor
                }
            }
            ;
        }
    </style>
</div>
