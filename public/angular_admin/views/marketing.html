<toaster-container toaster-options="{'time-out': 3000, 'close-button':true}"></toaster-container>
<onboarding-popover enabled='showOnboarding' steps='onboardingSteps' step-index='stepIndex'
on-finish-callback='finishOnboarding'></onboarding-popover>
<div class="marketing">

    <div class="pageheader row">
        <div class="col-xs-8">
            <h2><i class="fa fa-bullhorn"></i>  Marketing</h2>
        </div>
        <div class="col-xs-4">
            <div class="btn-group pull-right btn-add" ng-show="!isEditing" style="margin-right: 10px;">
                <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
                    <i class="fa fa-plus"></i>
                    <span class="hidden-xs">Add</span>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="" data-toggle="modal" data-target="#marketing-add-campaign"> Campaign</a>
                    </li>
                    <li><a href="" data-toggle="modal" data-target="#marketing-add-feed"> Social Feed</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="clear"></div>
    </div>

    <div class="col-xs-12 nopadding header-menu-row">
        <div class="btn-group col-xs-12 template-btns nopadding mb0">
            <button type="button" class="btn btn-default btn-lg col-xs-6 tooltips" ng-class="{'active': activeTab === 'social-feed'}" ng-click="activeTab = 'social-feed'">
                <div tooltip-placement="bottom" tooltip-html-unsafe="What are people saying?">
                    <i class="fa fa-newspaper-o"></i>
                    <span class="hidden-xs">Social Feed</span>
                </div>
            </button>
            <button type="button" class="btn btn-default btn-lg col-xs-6" ng-class="{'active': activeTab === 'campaigns'}" ng-click="activeTab = 'campaigns'" disabled="false">
                <div tooltip-placement="bottom" tooltip-html-unsafe="What are customers doing?">
                    <i class="fa fa-flag"></i>
                    <span class="hidden-xs">Campaigns <span class="label label-primary">Coming Soon</span>
                </div>
                </span>
            </button>
        </div>
    </div>

    <div class="contentpanel" ng-style="styleMarketingSection()" indigeweb-resize>
        <div class="campaign-section" ng-show="activeTab == 'campaigns'">
            <div class="col-xs-12 col-sm-4" ng-repeat="campaign in campaigns track by $index">
                <div class="grid-list-item btn-view-product-details" data-productid="1">
                    <a href="#/marketing/campaign/{{campaign._id}}">
                        <div class="col-xs-12">
                            <h4 class="title center">{{campaign.title}}</h4>
                            <hr class="clearfix mb15">
                            <div class="campaign-stats">
                                <div class="status" ng-if="campaignSettings.showStatus">
                                    Status: <span class="data">{{campaign.status}}</span>
                                </div>
                                <div class="type" ng-if="campaignSettings.showType">
                                    Type: <span class="data">{{campaign.type}}</span>
                                </div>
                                <div class="conversions" ng-if="campaignSettings.showContacts">
                                    Contacts: <span class="data">{{campaign.contacts}}</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    <div class="clearfix"></div>
                </div>
            </div>

            <div ng-if="campaigns.length <= 0" class="empty">
                <h1 class="center"><span class="fa fa-flag-o"></span></h1>
                <h2 class="center">No Campaigns Yet</h2>
                <h3 class="center">Add campaign for them to appear here.</h3>
            </div>
        </div>
        <div class="social-feed-section" ng-show="activeTab == 'social-feed'">
            <!-- <div ng-if="feed.length <= 0" class="empty">
                    <h1 class="center"><span class="fa fa-newspaper-o"></span></h1>
                    <h2 class="center">No Feeds Setup</h2>
                    <h3 class="center">Add a Feed to get set up.</h3>
                </div> -->
            <div class="col-sm-3 stream-filter">
                <accordion>
                    <accordion-group is-open="item.open" ng-repeat="type in feedTypes">
                        <accordion-heading>
                            <div class="feedTypeDetail">
                                <input type="checkbox" class="pull-left glyphicon" ng-click="filterFeed(type.type, $event)" checked="checked" />
                                <img ng-src="{{type.picture.data.url || type.profile_image_url_https}}" class="avatar pull-left" />
                                <div class="pull-left">
                                    <h4>{{type.name}}</h4>
                                    <p><span class="fa fa-{{type.type}}-square"></span> {{type.type}}</p>
                                </div>

                                <span class="glyphicon pull-right" ng-class="{'glyphicon-chevron-up': item.open, 'glyphicon-chevron-down': !item.open}"></span>
                                <div class="clearfix"></div>
                            </div>
                        </accordion-heading>
                        <!--  <div ng-repeat="data in item.content">
                                        <input type="checkbox" class="pull-left glyphicon" ng-click="filterSubitemClick(data, item.title, $event)" ng-checked="master" value="{{data}}" />{{data}}
                                    </div> -->
                        <!-- TWITTER -->
                        <!-- <div class="col-xs-12 ckbox ckbox-success">
                                    <input type="checkbox" name="mentions" class="ng-pristine ng-untouched ng-valid" checked="checked">
                                    <label for="mentions">Mentions</label>
                                    <hr></hr>
                                </div>
                                <div class="col-xs-12 ckbox ckbox-success">
                                    <input type="checkbox" name="retweets" class="ng-pristine ng-untouched ng-valid" checked="checked">
                                    <label for="retweets">Retweets</label>
                                    <hr></hr>
                                </div> -->
                        <div class="col-xs-12" ng-if="type.type == 'twitter'">
                            <input type="checkbox" name="tweets" class="ng-pristine ng-untouched ng-valid" checked="checked">
                            <label for="tweets">Tweets</label>
                            <span class="pull-right label label-primary">{{tweetsLength}}</span>
                            <hr></hr>
                        </div>
                        <div class="col-xs-12" ng-if="type.type == 'twitter'">
                            <input type="checkbox" name="followers" class="ng-pristine ng-untouched ng-valid" checked="checked">
                            <label for="followers">Followers</label>
                            <span class="pull-right label label-primary">{{followersLength}}</span>
                            <hr></hr>
                        </div>
                        <!--  <div class="col-xs-12 ckbox ckbox-success">
                                    <input type="checkbox" name="dm-inbox" class="ng-pristine ng-untouched ng-valid" checked="checked">
                                    <label for="dm-inbox">DM Inbox</label>
                                    <hr></hr>
                                </div>
                                <div class="col-xs-12 ckbox ckbox-success">
                                    <input type="checkbox" name="dm-outbox" class="ng-pristine ng-untouched ng-valid" checked="checked">
                                    <label for="dm-outbox">DM Outbox</label>
                                    <hr></hr>
                                </div>
                                <div class="col-xs-12 ckbox ckbox-success">
                                    <input type="checkbox" name="dm-outbox" class="ng-pristine ng-untouched ng-valid" checked="checked">
                                    <label for="dm-outbox">Scheduled</label>
                                    <hr></hr>
                                </div> -->

                        <!-- FACEBOOK -->

                        <div class="col-xs-12" ng-if="type.type == 'facebook'">
                            <input type="checkbox" name="likes" class="ng-pristine ng-untouched ng-valid" checked="checked">
                            <label for="likes">Likes</label>
                            <span class="pull-right label label-primary">--</span>
                            <hr></hr>
                        </div>
                        <div class="col-xs-12" ng-if="type.type == 'facebook'">
                            <input type="checkbox" name="posts" class="ng-pristine ng-untouched ng-valid" checked="checked">
                            <label for="posts">Posts</label>
                            <span class="pull-right label label-primary">{{fbPostsLength}}</span>
                            <hr></hr>
                        </div>
                    </accordion-group>
                </accordion>

            </div>
            <div ng-if="feed.length > 0" class="col-sm-9">
                <div class="submit-post-form">
                    <div class="panel panel-dark panel-alt timeline-post">
                        <div class="panel-body">
                            <textarea placeholder="Write something..." class="form-control" id="postContent" ng-model="postContent"></textarea>
                        </div>
                        <!-- panel-body -->
                        <div class="panel-footer">
                            <div class="timeline-btns pull-left">
                                <a href="" class="tooltips hidden" data-toggle="tooltip" title="" data-original-title="Add Photo"><i class="glyphicon glyphicon-picture"></i></a>
                                <a href="" class="tooltips hidden" data-toggle="tooltip" title="" data-original-title="Add Video"><i class="glyphicon glyphicon-facetime-video"></i></a>
                            </div>
                            <div class="pull-left">
                                <div class="form-horizontal" style="margin-left: 20px;">
                                    <div class="form-group mb0">
                                        <label for="post-to" class="pull-left control-label" style="padding: 0;margin-right: 10px;font-size: 14px;">Post To: </label>
                                        <div class="pull-left">
                                            <select class="form-control mb0" ng-model="selectedType" ng-change="postToChange(selectedType)">
                                                <option ng-repeat="type in feedTypes" value="{{type}}">{{type.type}} {{type.name}}</option>
                                            </select>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--timeline-btns -->
                            <button class="btn btn-primary pull-right" ng-click="postToSocial(selectedSocial.socialId, postContent, selectedSocial.type) "><i class="fa fa-spinner fa-spin" ng-show="postingToSocial"></i> Submit Post</button>
                        </div>
                        <!-- panel-footer -->
                    </div>
                </div>
                <ul class="stream">
                    <li ng-repeat="post in displayedFeed track by $index | orderBy: 'date':true" class="col-sm-6 mb20">
                        <div ng-if="post.type == 'facebook'">
                            <!-- <div class="post-inner">
                                <div class="post-content">
                                    <img src="{{post.picture}}">
                                </div>
                                <div class="post-bottom-bar {{post.type}}">
                                    <i class="fa fa-{{post.type}} pull-left"></i>
                                    <span>Posted {{post.date | timeAgoFilter}}</span>
                                </div>
                            </div> -->
                            <div class="panel panel-default panel-timeline">
                                <div class="panel-heading">

                                    <div class="media">
                                        <a href="#" class="pull-left">
                                            <img alt="" src="{{post.from.profile_pic}}" class="media-object">
                                        </a>
                                        <div class="media-body">
                                            <h4 class="text-primary">{{post.from.name}} <small>shared a {{post.postType}}</small></h4>
                                            <small class="text-muted">{{formatDate(post.date)}}</small>
                                        </div>
                                    </div>
                                    <!-- media -->

                                </div>
                                <!-- panel-heading -->
                                <div class="panel-body">

                                    <div class="media">
                                        <a href="#" ng-class="{'pull-left': post.postType !== 'link'}">
                                            <img alt="" src="{{post.picture}}" class="media-object">
                                        </a>
                                        <div class="media-body">
                                            <p class="center">{{post.message}}</p>
                                            <!-- <pre>{{post}}</pre> -->
                                        </div>
                                    </div>

                                    <div class="timeline-btns" ng-show="post.postType !== 'link'">
                                        <div class="pull-left">
                                            <a href="" tooltip-placement="top" tooltip-html-unsafe="Like / Unlike"><i class="fa fa-thumbs-up"></i></a>
                                            <a href="" tooltip-placement="top" tooltip-html-unsafe="Add Comment"><i class="fa fa-comment"></i></a>
                                            <a href="{{post.link}}" tooltip-placement="top" tooltip-html-unsafe="External Link" target="_blank"><i class="fa fa-share"></i></a>
                                        </div>
                                        <div class="pull-right">
                                            <small class="text-muted">{{post.likes.length || 0}} people like this</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="post-bottom-bar facebook">
                                    <i class="fa fa-facebook pull-left"></i>
                                    <span>Posted {{post.date | timeAgoFilter}}</span>
                                </div>
                            </div>
                        </div>
                        <div ng-if="post.type == 'twitter' && post.postType == 'tweet'">
                            <div class="post-inner">
                                <div class="post-content">
                                    {{post.message}}
                                    <!-- <pre>{{post}}</pre> -->
                                </div>
                                <div class="post-bottom-bar {{post.type}}">
                                    <i class="fa fa-{{post.type}} pull-left"></i>
                                    <span>Tweeted {{post.date | timeAgoFilter}}</span>
                                </div>
                            </div>
                        </div>
                        <div ng-if="post.type == 'twitter' && post.postType == 'follower'">
                            <div class="post-inner">
                                <div class="post-content">
                                    <img class="img-thumbnail img-circle center" src="{{post.from.profileimg}}">
                                    <h4 class="center">{{post.from.name}}</h4>
                                    <!-- <p>{{post.from.description}}</p> -->
                                    <!-- <pre>{{post}}</pre> -->
                                </div>
                                <div class="post-bottom-bar {{post.type}}">
                                    <i class="fa fa-{{post.type}} pull-left"></i>
                                    <span>Followed {{post.date | timeAgoFilter}}</span>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="rightpanel">
        <div class="rightpanel rightpanel-marketing">
            <ul class="nav nav-tabs nav-justified">
                <li class="active"><a href="#" data-toggle="tab">Settings</a>
                </li>
            </ul>

            <div class="tab-content">
                <div class="tab-pane pane-settings active" id="rp-settings">
                    <h4>No Settings Avaliable</h4>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="marketing-add-campaign">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Add New Campaign</h4>
                </div>
                <div class="modal-body">


                    <form role="form">
                        <div class="form-group">
                            <label for="productName">Campaign Name</label>
                            <input type="text" class="form-control input-lg" id="campaignName" placeholder="Enter a name for your campaign" ng-model='newCampaign.title' />
                        </div>
                        <div class="form-group">
                            <label for="campaignType">Campaign Type</label>
                            <select id="campaignType" ng-model="newCampaign.type" class="form-control input-lg">
                                <option value="autoresponder">AutoResponder</option>
                                <!-- <option value="one_time" disabled="">One Time</option>
                                <option value="webinar">Webinar</option>
                                <option value="date_based" disabled="">Date Based</option>
                                <option value="custom" disabled="">Custom</option> -->
                            </select>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addCampaignFn()"><i class="fa fa-plus" /> Add</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="marketing-add-feed">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Add Feed</h4>
                </div>
                <div class="modal-body">
                    <div class="col-xs-3 left-panel">
                        <ul class="integrations" ng-init="modalfeed = 'facebook'">
                            <li ng-click="modalfeed = 'facebook'" ng-class="{active: modalfeed == 'facebook'}"><i class="fa fa-facebook-square"></i> <span class="hidden-xs">Facebook</span>
                            </li>
                            <li ng-click="modalfeed = 'linkedin'" ng-class="{active: modalfeed == 'linkedin'}"><i class="fa fa-linkedin-square"></i> <span class="hidden-xs">LinkedIn</span>
                            </li>
                            <li ng-click="modalfeed = 'google-plus'" ng-class="{active: modalfeed == 'google-plus'}"><i class="fa fa-google-plus-square"></i> <span class="hidden-xs">Google Plus</span>
                            </li>
                            <li ng-click="modalfeed = 'twitter'" ng-class="{active: modalfeed == 'twitter'}"><i class="fa fa-twitter-square"></i> <span class="hidden-xs">Twitter</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-xs-9 right-panel">
                        <div ng-show="modalfeed == 'facebook'">
                            <ul class="fb-admin-pages">
                                <li ng-repeat="page in fbAdminPages"><img src="{{page.profilePic}}" class="thumbnail pull-left clearfix"> {{page.name}} <span class="fa fa-plus-square pull-right" ng-click="addPageFeed(page)"></span>
                                </li>
                            </ul>
                        </div>
                        <div ng-show="modalfeed == 'twitter'">Twitter</div>
                        <div ng-show="modalfeed == 'google-plus'">Google Plus</div>
                        <div ng-show="modalfeed == 'linkedin'">LinkedIn</div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addFeedFn()"><i class="fa fa-plus" /> Add</button>
                </div> -->
            </div>
        </div>
    </div>

</div>
