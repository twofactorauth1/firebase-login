<!--
* COPYRIGHT INDIGENOUS SOFTWARE, INC., LLC 2014
*
* All use or reproduction of any or all of this content must be approved.
* Please contact info@indigenous.io for approval or questions.
*
-->

<div ng-class="component.type+'-v'+component.version">
    <div class="image-gallery-title">
        <div elem ng-model="component.title"></div>
    </div>
    <div>
        <div ng-cloak>
            <div class="image-gallery-images" data-ng-repeat="image in component.images">
                <div class="col-sm-6 col-md-4 col-xs-12 image-wrap {{isEditing ? 'editing' : ''}}">
                    <div data-edit class="edit-wrap ssb-edit-wrap ssb-img thumbnail img-height single-image" >
                        <a href="{{image.url}}" title="{{image.label}}" data-gallery id="img-gallery-{{$index}}">
                            <div id="{{component._id}}-{{$index}}"  class="ssb-img-settings img-responsive img-gallery-{{$index}} image-gallery center" data-index="{{$index}}"
                             alt="{{image.label}}" ng-attr-style="background-image: url('{{image.url}}')" image= "image">
                                <div class="image-overlay" ng-if="isEditing && vm.elementData.imageOverlay.active"
                                ng-style="{ 'width': '100%' ,
                                            'height': '100%' ,
                                            'background-color':vm.elementData.imageOverlay.backgroundcolor,
                                            'opacity':vm.elementData.imageOverlay.backgroundopacity/100,
                                            'font-size':vm.elementData.imageOverlay.font.fontSize+'px',
                                            'font-family':vm.elementData.imageOverlay.font.fontFamily,
                                            'color':vm.elementData.imageOverlay.color
                                        }" >
                                        <div class="header">{{vm.elementData.imageOverlay.heading}}</div>
                                        <div class="desc">{{vm.elementData.imageOverlay.description}}</div>
                                    
                                </div>
                                <div ng-if="!isEditing && image.imageOverlay.active" class="image-overlay {{image.imageOverlay.onMouseOver?'mouse-on':'mouse-off'}}"
                                ng-style="{ 'width': '100%' ,
                                            'height': '100%' ,
                                            'background-color':image.imageOverlay.backgroundcolor,
                                            'opacity':image.imageOverlay.backgroundopacity/100,
                                            'font-size':image.imageOverlay.font.fontSize+'px',
                                            'font-family':image.imageOverlay.font.fontFamily,
                                            'color':image.imageOverlay.color
                                        }" >
                                        <div class="header">{{image.imageOverlay.heading}}</div>
                                        <div class="desc">{{image.imageOverlay.description}}</div>
                                    
                                </div>
                            </div>
                        </a>
                    </div>
                    <div data-edit class="image-title">
                        <div elem ng-model="image.title"></div>
                    </div>
                    <div ng-if="isEditing" class="link-single-image center"  ng-click="addImageFromMedia(component._id, $index, true)">
                        <button class="ng-scope btn-link-single-image" tooltip-placement="top" tooltip-append-to-body="true"  tooltip-append-to-body="true" tooltip="Change this image."><i class='fa fa-link'></i></button>
                    </div> 
                    <div ng-if="isEditing" class="delete-single-image center" ng-click="deleteImageFromGallery($index)">
                        <button class="ng-scope btn-delete-single-image" tooltip-placement="top" tooltip-append-to-body="true"  tooltip-append-to-body="true" tooltip="Delete this image."><i class='fa fa-trash'></i></button>
                    </div>
                    <div ng-if="isEditing" class="center" ng-click="addImageFromMedia(component._id, $index, false)" >
                        <a class="add-addtional" tooltip-placement="top" tooltip-append-to-body="true"  tooltip-append-to-body="true" tooltip="Add another image."><i class='fa fa-plus'></i></a>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <button ng-if="isEditing && component.images.length === 0" ng-click="addImageFromMedia(component._id,0)" class="btn ssb-theme-btn btn-primary btn-lg pull-right btn-add-image" >Add new Image</button>
</div>
