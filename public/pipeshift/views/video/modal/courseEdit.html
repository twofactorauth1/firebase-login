<div class="modal-header">
    <button aria-hidden="true" data-dismiss="modal" class="close" type="button" ng-click="close()">Ã—</button>
    <h3 class="modal-title">Course Edit</h3>
</div>
<div class="modal-body modal-edit-playlist">
    <tabset>
        <tab >
            <tab-heading>
                <span class='fa fa-info-circle'></span> Course Info
            </tab-heading>
            <form name="$parent.courseForm" class="col-md-12">
                <div class="form-group">
                    <label class="control-label" for="template">Template:</label>
                    <select id="template" class="form-control input-lg" ng-model="course.template.name"
                            ng-options="template.name as template.name for template in templates">
                    </select>
                </div>
                <div class="form-group"
                     ng-class="{'has-error':courseForm.subdomain.$invalid&&(courseForm.subdomain.$dirty)}">
                    <label class="control-label" for="subdomain">Subdomain:</label>
                    <input name="subdomain" id="subdomain" class="form-control input-lg mb30" type="text" ng-model="course.subdomain"
                           ng-change="onSubdomainChange()" tooltip="{{isSubdomainFree?'':'Subdomain is already taken'}}">
                    <!--ng-href="{{protocol+(hostHasWWW?'www.':'')+playlist.subdomain+'.'+domain}}"-->
                    <a ng-href="{{protocol + domain + '/course/' + course.subdomain }}" target="_blank"
                       class="btn btn-primary btn-block btn-lg"
                       ng-disabled="!isSubdomainChecked || !isSubdomainFree || course.subdomain==null || course.subdomain.trim().length==0">Course
                        Link</a>
                </div>
                <div class="form-group">
                    <label class="control-label" for="price">Price:</label>
                    <input id="price" class="form-control input-lg" ng-model="course.price" money>
                </div>
                <div class="form-group" ng-show="isAdd">
                    <label class="control-label" for="title">Title:</label>
                    <input id="title" class="form-control input-lg" type="text" ng-model="course.title">
                </div>
                <div class="form-group" ng-show="isAdd">
                    <label class="control-label" for="subtitle">Sub Title:</label>
                    <input id="subtitle" class="form-control input-lg" type="text" ng-model="course.subtitle">
                </div>
                <div class="form-group">
                    <label class="control-label" for="description">Description:</label>
                    <textarea id="description" class="form-control input-lg" ng-model="course.description" rows="3"></textarea>
                </div>
                <div class="form-group" ng-show="isAdd">
                    <label class="control-label" for="body">Body:</label>
                    <textarea id="body" class="form-control" ng-model="course.body" rows="3"></textarea>
                </div>

                <div class="ckbox ckbox-primary">
                    <input  id="showExitIntentModal" type="checkbox" ng-model="playlist.showExitIntentModal"/>
                    <label for="checkboxPrimary">Show exit intent modal</label>
                  </div>
            </form>
        </tab>
        <tab disabled="tab.disabled" ng-hide="isAdd">
            <tab-heading>
                <span class='fa fa-edit' ng-click="editMode=!editMode"></span> Edit Template
            </tab-heading>
                <div class="col-md-12">
                    <button type="button" class="btn btn-primary btn-block btn-lg mb30" ng-click="editMode=!editMode" data-toggle="button">Make Editable
                    </button>
                    <course-preview course="course" edit-mode="editMode"></course-preview>
                </div>
        </tab>
        <tab disabled="tab.disabled" ng-hide="isAdd">
            <tab-heading>
                <span class='fa fa-users'></span> Subscribers <span class="badge">{{subscribers.length}}</span>
            </tab-heading>
            <div class="col-md-12 subscribers-list-div">
                    <div class="btn-group pull-right">
                      <button class="btn btn-default" type="button" ng-click="showSubscribersCsvUploadModal()"><span class="fa fa-upload"></span> Upload</button>
                        <button class="btn btn-default" type="button" ng-csv="subscribers" filename="test.csv"><span class="fa fa-download"></span> Export</button>
                    </div>
                    <div class="clearfix mb20"></div>
                    <div class="well subscribers-list">
                        <div ng-show="subscribers.length==0" class="center"><h1>No subscribers have been added.</h1></div>
                        <table>
                            <tr ng-repeat="subscriber in subscribers">
                                <td>{{($index+1)+'. '+subscriber.email+'['+(subscriber.subscribeDate | date:'yyyy-MM-dd hh:mm a')+']'}}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
        </tab>
    </tabset>

</div>
<div class="modal-footer">
    <button type="submit" class="btn btn-remove pull-left btn-danger" ng-show="!isAdd" ng-click="removeCourse()">Remove</button>
    <button type="submit" class="btn btn-success btn-add" ng-show="isAdd" ng-click="submit()"
            ng-disabled="!isSubdomainChecked || !isSubdomainFree">Add
    </button>
    <button type="submit" class="btn btn-success btn-add" ng-show="!isAdd" ng-click="submit()"
            ng-disabled="!isSubdomainChecked || !isSubdomainFree">Save
    </button>
</div>

