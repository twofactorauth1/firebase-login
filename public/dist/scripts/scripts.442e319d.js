"use strict";var mainApp=angular.module("mainApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"]).config(["$stateProvider","$routeProvider",function(a,b){a.state("/",{url:"/",templateUrl:"views/main.html",controller:"LayoutCtrl as layout"}).state("about",{url:"/about",templateUrl:"views/about.html",controller:"MainCtrl"}),b.otherwise({redirectTo:"/#/"})}]);mainApp.factory("accountService",["$location","$http",function(a,b){var c=this;return c.account=null,function(a){console.log("START:Account Service"),c.account?(console.log("GET:Account Service Cached Data"),a(null,c.account)):(console.log("GET:Account Service Database Data"),b.get("/api/1.0/account").success(function(b){c.account=b,console.log("END:Account Service with SUCCESS"),a(null,b)}).error(function(b){console.log("END:Account Service with ERROR"),a(b,null)}))}}]),mainApp.factory("websiteService",["accountService","$http",function(a,b){var c=this;return c.website=null,function(d){console.log("START:Website Service"),c.website?(console.log("GET:Website Service Cached Data"),d(null,c.website)):a(function(a,e){a?(console.log("Method:accountService Error: "+a),d(a,null)):(console.log("Method:accountService Success: ",e),console.log("GET:Website Service Database Data"),b.get("/api/1.0/cms/website/"+e.website.websiteId).success(function(a){c.website=a,console.log("END:Website Service with SUCCESS"),d(null,a)}).error(function(a){console.log("END:Website Service with ERROR"),d(a,null)}))})}}]),mainApp.factory("themeService",["accountService","$http",function(a,b){var c=this;return c.theme=null,function(d){console.log("START:Theme Service"),c.theme?(console.log("GET:Theme Service Cached Data"),d(null,c.theme)):a(function(a,e){a?(console.log("Method:themeService Error: "+a),d(a)):(console.log("Method:themeService Success: ",e),console.log("GET:Theme Service Database Data"),b.get("/api/1.0/cms/theme/"+e.website.themeId).success(function(a){c.theme=a,console.log("END:Theme Service with SUCCESS"),d(null,a)}).error(function(a){console.log("END:Theme Service with ERROR"),d(a,null)}))})}}]),mainApp.factory("pagesService",["websiteService","$http",function(a,b){var c,d=[];return function(e){a(function(a,f){if(a)console.log(a,">>>>>>>>>>>>>websiteService>>>>>>>>err>>>>>>>>>>>"),e(a,null);else{c=f;var g="index";b.get("/api/1.0/cms/website/"+c._id+"/page/"+g).success(function(a){null!==a?(d[0]=a,e(null,d)):e("page not found")}).error(function(a){console.log(a,">>>>>>>>>>>page>>>>>>>>>>err>>>>>>>>>>>"),e(a)})}})}}]),mainApp.filter("createUrlFilter",["accountService",function(a){return function(b){return b&&a(function(a,c){return a?(console.log("Error "+a),a):void b.forEach(function(a){a.url="components/"+a.type+"/"+a.type+"_"+c.website.themeId+".html"})}),b}}]);var mainApp=angular.module("mainApp");mainApp.filter("generateURLforLinks",function(){return function(a){var b="";switch(a.type){case"page":return b="#/page/"+a.data;case"home":b="/";break;case"url":return a.data;case"section":return"#"+a.data;case"product":b="";break;case"collection":b="";break;default:return"#"}var c=!0;return null!=b&&c===!0&&(-1==b.indexOf("?")&&(b+="?"),b+="&editor=true"),b}}),mainApp.controller("MainCtrl",["$scope","accountService","websiteService","themeService","pagesService",function(a,b,c,d,e){var f,g,h=this;b(function(a,b){a?console.log("Controller:MainCtrl -> Method:accountService Error: "+a):(f=b,h.themeUrl="components/layout/layout_"+f.website.themeId+".html",h.themeStyle="styles/style."+f.website.themeId+".css",console.log("Controller:MainCtrl -> Method:accountService Success: ",b))}),e(function(a,b){a?console.log("Controller:MainCtrl -> Method:pageService Error: "+a):(g=b,console.log("Controller:MainCtrl -> Method:pageService Success: ",b),h.pageName=g[0].title)})}]),mainApp.controller("LayoutCtrl",["$scope","pagesService","accountService","websiteService",function(a,b){var c=this;console.log("i m layout controller"),b(function(a,b){a?console.log("Controller:LayoutCtrl -> Method:accountService Error: "+a):(c.pages=b,console.log("Controller:LayoutCtrl -> Method:accountService Success: ",b))})}]);