<script type="text/ng-template" id="product-details-modal">

<div class="products-v1" id="product-details-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeProductDetailsModal();">&times;</button>
        <h4 class="modal-title"> Product Detail</h4>
    </div>
    <div class="modal-body">
        <div class="col-sm-6">
            <div class="product-img">
                <div ng-if="selectedProduct.is_image" class="img-wrap">
                                
                    <img ng-if="isImage(selectedProduct.icon)" ng-src="{{::truncateImageUrl(selectedProduct.icon)}}" class="img-responsive">
                    <img ng-if="!isImage(selectedProduct.icon)" class="img-responsive" src="/images/default-media.png"/>
                </div>
                <div ng-if="!selectedProduct.is_image && selectedProduct.icon" class="img-wrap icon">
                    <i ng-style="{'color':component.iconColor}" class="fa {{selectedProduct.icon}} fa-5x"></i>
                </div>
                <div ng-if="!selectedProduct.is_image && !selectedProduct.icon" class="img-wrap no-preview">
                    <h3>No Preview <br> Available</h3>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <tabset class="tabbable">
                <tab heading="Details">
                    <div class="caption">
                        <h4 class="title">{{selectedProduct.name}}</h4>
                        <h4 ng-if="!selectedProduct.hasVariations">
                            <span ng-class="{'strikethrough text-small': selectedProduct.onSaleToday}">{{selectedProduct.regular_price | currency}}</span><span ng-if="selectedProduct.onSaleToday">{{selectedProduct.sale_price | currency}}</span>
                        </h4>

                        <h4 ng-if="selectedProduct.hasVariations && matchedVariation">{{matchedVariation.regular_price | currency}}</h4>

                        <div class="clearfix"></div>
                    </div>
                    <div class="attributes form-horizontal">
                        <div class="form-group" ng-repeat="attribute in selectedProduct.attributes">
                            <label class="col-sm-2 control-label">
                                {{attribute.name}}
                            </label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="attribute.selected" ng-change="selectChanged($index)">
                                    <option ng-repeat="value in attribute.values" ng-if="variationAttributeExists(value)" value="{{value}}">{{value}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="actions">
                        <button
                            ng-disabled='selectedProduct.type == "SUBSCRIPTION" && !stripeInfo'
                            class="btn ssb-theme-btn btn-primary btn-block center"
                            ng-click="addDetailsToCart(true, selectedProduct, matchedVariation)"
                            href="#"
                            ng-if="selectedProduct.type != 'external' && itemClicked(selectedProduct) != true && matchedVariation">

                            <div data-class="btn-text" ng-hide='selectedProduct.type == "SUBSCRIPTION" && !stripeInfo'>
                                <span class="fa fa-shopping-cart"></span> Add to Cart
                            </div>
                            <div data-class="btn-text" ng-show='selectedProduct.type == "SUBSCRIPTION" && !stripeInfo'>
                                <span class="fa fa-shopping-cart"></span> Stripe account needed
                            </div>

                        </button>

                        <button
                            class="btn ssb-theme-btn btn-success btn-block center"
                            href="#"
                            ng-if="selectedProduct.type != 'external' && itemClicked(selectedProduct) == true && !selectedProduct.hasVariations">

                            <div data-class="btn-text">
                                <span class="fa fa-check"></span> Added to Cart!
                            </div>

                        </button>

                        <a class="btn ssb-theme-btn btn-primary btn-block center" href="http://{{selectedProduct.externalLinklinkUrl}}" ng-if="selectedProduct.type == 'external'" target="{{selectedProduct.externalLinkOpenIn}}">
                            <div data-class="btn-text">
                                <span class="fa fa-shopping-cart hidden"></span> {{selectedProduct.externalLinklinkText || 'External Link'}}
                            </div>
                        </a>

                    </div>
                </tab>
                <tab heading="Additional Information">
                    <p class="description product-info-desc" ng-attr-style="{{descriptionStyle(component.formSettings)}}">{{selectedProduct.description}}</p>
                </tab>
            </tabset>
        </div>
        <div class="clearfix"></div>
    </div>
</div>

</script>
